{"dependencies":[{"name":"./extractNationalNumberFromPossiblyIncompleteNumber.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":119,"index":119}}],"key":"fHu6Ytji0OYn7EnQsP52CwijVE4=","exportNames":["*"],"imports":1}},{"name":"./matchesEntirely.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":120},"end":{"line":2,"column":51,"index":171}}],"key":"JyYLl+T8Rxp04fItLEbJGp7xFyU=","exportNames":["*"],"imports":1}},{"name":"./checkNumberLength.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":172},"end":{"line":3,"column":55,"index":227}}],"key":"iZlnNQAQyVkqpIzzrNxHdyk7kP8=","exportNames":["*"],"imports":1}},{"name":"./getCountryByCallingCode.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":228},"end":{"line":4,"column":67,"index":295}}],"key":"aHJE19swrVVDQWT1dmbhFXYnpvM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return extractNationalNumber;\n    }\n  });\n  var _extractNationalNumberFromPossiblyIncompleteNumberJs = require(_dependencyMap[0], \"./extractNationalNumberFromPossiblyIncompleteNumber.js\");\n  var extractNationalNumberFromPossiblyIncompleteNumber = _interopDefault(_extractNationalNumberFromPossiblyIncompleteNumberJs);\n  var _matchesEntirelyJs = require(_dependencyMap[1], \"./matchesEntirely.js\");\n  var matchesEntirely = _interopDefault(_matchesEntirelyJs);\n  var _checkNumberLengthJs = require(_dependencyMap[2], \"./checkNumberLength.js\");\n  var checkNumberLength = _interopDefault(_checkNumberLengthJs);\n  var _getCountryByCallingCodeJs = require(_dependencyMap[3], \"./getCountryByCallingCode.js\");\n  var getCountryByCallingCode = _interopDefault(_getCountryByCallingCodeJs);\n  /**\r\n   * Strips national prefix and carrier code from a complete phone number.\r\n   * The difference from the non-\"FromCompleteNumber\" function is that\r\n   * it won't extract national prefix if the resultant number is too short\r\n   * to be a complete number for the selected phone numbering plan.\r\n   * @param  {string} number — Complete phone number digits.\r\n   * @param  {string?} country — Country, if known.\r\n   * @param  {Metadata} metadata — Metadata with a phone numbering plan selected.\r\n   * @return {object} `{ nationalNumber: string, carrierCode: string? }`.\r\n   */\n  function extractNationalNumber(number, country, metadata) {\n    // Parsing national prefixes and carrier codes\n    // is only required for local phone numbers\n    // but some people don't understand that\n    // and sometimes write international phone numbers\n    // with national prefixes (or maybe even carrier codes).\n    // http://ucken.blogspot.ru/2016/03/trunk-prefixes-in-skype4b.html\n    // Google's original library forgives such mistakes\n    // and so does this library, because it has been requested:\n    // https://github.com/catamphetamine/libphonenumber-js/issues/127\n    var _extractNationalNumbe = (0, extractNationalNumberFromPossiblyIncompleteNumber.default)(number, metadata),\n      carrierCode = _extractNationalNumbe.carrierCode,\n      nationalNumber = _extractNationalNumbe.nationalNumber;\n    if (nationalNumber !== number) {\n      if (!shouldHaveExtractedNationalPrefix(number, nationalNumber, metadata)) {\n        // Don't strip the national prefix.\n        return {\n          nationalNumber: number\n        };\n      }\n      // Check the national (significant) number length after extracting national prefix and carrier code.\n      // Legacy generated metadata (before `1.0.18`) didn't support the \"possible lengths\" feature.\n      if (metadata.numberingPlan.possibleLengths()) {\n        // If an exact `country` is not specified, attempt to detect it from the assumed national number.\n        if (!country) {\n          country = (0, getCountryByCallingCode.default)(metadata.numberingPlan.callingCode(), {\n            nationalNumber: nationalNumber,\n            metadata: metadata\n          });\n        }\n\n        // The number remaining after stripping the national prefix and carrier code\n        // should be long enough to have a possible length for the country.\n        // Otherwise, don't strip the national prefix and carrier code,\n        // since the original number could be a valid number.\n        // This check has been copy-pasted \"as is\" from Google's original library:\n        // https://github.com/google/libphonenumber/blob/876268eb1ad6cdc1b7b5bef17fc5e43052702d57/java/libphonenumber/src/com/google/i18n/phonenumbers/PhoneNumberUtil.java#L3236-L3250\n        // It doesn't check for the \"possibility\" of the original `number`.\n        // I guess it's fine not checking that one. It works as is anyway.\n        if (!isPossibleIncompleteNationalNumber(nationalNumber, country, metadata)) {\n          // Don't strip the national prefix.\n          return {\n            nationalNumber: number\n          };\n        }\n      }\n    }\n    return {\n      nationalNumber: nationalNumber,\n      carrierCode: carrierCode\n    };\n  }\n\n  // In some countries, the same digit could be a national prefix\n  // or a leading digit of a valid phone number.\n  // For example, in Russia, national prefix is `8`,\n  // and also `800 555 35 35` is a valid number\n  // in which `8` is not a national prefix, but the first digit\n  // of a national (significant) number.\n  // Same's with Belarus:\n  // `82004910060` is a valid national (significant) number,\n  // but `2004910060` is not.\n  // To support such cases (to prevent the code from always stripping\n  // national prefix), a condition is imposed: a national prefix\n  // is not extracted when the original number is \"viable\" and the\n  // resultant number is not, a \"viable\" national number being the one\n  // that matches `national_number_pattern`.\n  function shouldHaveExtractedNationalPrefix(nationalNumberBefore, nationalNumberAfter, metadata) {\n    // The equivalent in Google's code is:\n    // https://github.com/google/libphonenumber/blob/e326fa1fc4283bb05eb35cb3c15c18f98a31af33/java/libphonenumber/src/com/google/i18n/phonenumbers/PhoneNumberUtil.java#L2969-L3004\n    if ((0, matchesEntirely.default)(nationalNumberBefore, metadata.nationalNumberPattern()) && !(0, matchesEntirely.default)(nationalNumberAfter, metadata.nationalNumberPattern())) {\n      return false;\n    }\n    // This \"is possible\" national number (length) check has been commented out\n    // because it's superceded by the (effectively) same check done in the\n    // `extractNationalNumber()` function after it calls `shouldHaveExtractedNationalPrefix()`.\n    // In other words, why run the same check twice if it could only be run once.\n    // // Check the national (significant) number length after extracting national prefix and carrier code.\n    // // Fixes a minor \"weird behavior\" bug: https://gitlab.com/catamphetamine/libphonenumber-js/-/issues/57\n    // // (Legacy generated metadata (before `1.0.18`) didn't support the \"possible lengths\" feature).\n    // if (metadata.possibleLengths()) {\n    // \tif (isPossibleIncompleteNationalNumber(nationalNumberBefore, metadata) &&\n    // \t\t!isPossibleIncompleteNationalNumber(nationalNumberAfter, metadata)) {\n    // \t\treturn false\n    // \t}\n    // }\n    return true;\n  }\n  function isPossibleIncompleteNationalNumber(nationalNumber, country, metadata) {\n    switch ((0, checkNumberLength.default)(nationalNumber, country, metadata)) {\n      case 'TOO_SHORT':\n      case 'INVALID_LENGTH':\n        // This library ignores \"local-only\" phone numbers (for simplicity).\n        // See the readme for more info on what are \"local-only\" phone numbers.\n        // case 'IS_POSSIBLE_LOCAL_ONLY':\n        return false;\n      default:\n        return true;\n    }\n  }\n});","lineCount":136,"map":[[12,2,16,15,"Object"],[12,8,16,15],[12,9,16,15,"defineProperty"],[12,23,16,15],[12,24,16,15,"exports"],[12,31,16,15],[13,4,16,15,"enumerable"],[13,14,16,15],[14,4,16,15,"get"],[14,7,16,15],[14,18,16,15,"get"],[14,19,16,15],[15,6,16,15],[15,13,16,15,"extractNationalNumber"],[15,34,16,15],[16,4,16,15],[17,2,16,15],[18,2,1,0],[18,6,1,0,"_extractNationalNumberFromPossiblyIncompleteNumberJs"],[18,58,1,0],[18,61,1,0,"require"],[18,68,1,0],[18,69,1,0,"_dependencyMap"],[18,83,1,0],[19,2,1,0],[19,6,1,0,"extractNationalNumberFromPossiblyIncompleteNumber"],[19,55,1,0],[19,58,1,0,"_interopDefault"],[19,73,1,0],[19,74,1,0,"_extractNationalNumberFromPossiblyIncompleteNumberJs"],[19,126,1,0],[20,2,2,0],[20,6,2,0,"_matchesEntirelyJs"],[20,24,2,0],[20,27,2,0,"require"],[20,34,2,0],[20,35,2,0,"_dependencyMap"],[20,49,2,0],[21,2,2,0],[21,6,2,0,"matchesEntirely"],[21,21,2,0],[21,24,2,0,"_interopDefault"],[21,39,2,0],[21,40,2,0,"_matchesEntirelyJs"],[21,58,2,0],[22,2,3,0],[22,6,3,0,"_checkNumberLengthJs"],[22,26,3,0],[22,29,3,0,"require"],[22,36,3,0],[22,37,3,0,"_dependencyMap"],[22,51,3,0],[23,2,3,0],[23,6,3,0,"checkNumberLength"],[23,23,3,0],[23,26,3,0,"_interopDefault"],[23,41,3,0],[23,42,3,0,"_checkNumberLengthJs"],[23,62,3,0],[24,2,4,0],[24,6,4,0,"_getCountryByCallingCodeJs"],[24,32,4,0],[24,35,4,0,"require"],[24,42,4,0],[24,43,4,0,"_dependencyMap"],[24,57,4,0],[25,2,4,0],[25,6,4,0,"getCountryByCallingCode"],[25,29,4,0],[25,32,4,0,"_interopDefault"],[25,47,4,0],[25,48,4,0,"_getCountryByCallingCodeJs"],[25,74,4,0],[26,2,6,0],[27,0,7,0],[28,0,8,0],[29,0,9,0],[30,0,10,0],[31,0,11,0],[32,0,12,0],[33,0,13,0],[34,0,14,0],[35,0,15,0],[36,2,16,15],[36,11,16,24,"extractNationalNumber"],[36,32,16,45,"extractNationalNumber"],[36,33,16,46,"number"],[36,39,16,52],[36,41,16,54,"country"],[36,48,16,61],[36,50,16,63,"metadata"],[36,58,16,71],[36,60,16,73],[37,4,17,2],[38,4,18,2],[39,4,19,2],[40,4,20,2],[41,4,21,2],[42,4,22,2],[43,4,23,2],[44,4,24,2],[45,4,25,2],[46,4,26,2],[46,8,26,6,"_extractNationalNumbe"],[46,29,26,27],[46,32,26,30],[46,36,26,30,"extractNationalNumberFromPossiblyIncompleteNumber"],[46,85,26,79],[46,86,26,79,"default"],[46,93,26,79],[46,95,26,80,"number"],[46,101,26,86],[46,103,26,88,"metadata"],[46,111,26,96],[46,112,26,97],[47,6,27,4,"carrierCode"],[47,17,27,15],[47,20,27,18,"_extractNationalNumbe"],[47,41,27,39],[47,42,27,40,"carrierCode"],[47,53,27,51],[48,6,28,4,"nationalNumber"],[48,20,28,18],[48,23,28,21,"_extractNationalNumbe"],[48,44,28,42],[48,45,28,43,"nationalNumber"],[48,59,28,57],[49,4,29,2],[49,8,29,6,"nationalNumber"],[49,22,29,20],[49,27,29,25,"number"],[49,33,29,31],[49,35,29,33],[50,6,30,4],[50,10,30,8],[50,11,30,9,"shouldHaveExtractedNationalPrefix"],[50,44,30,42],[50,45,30,43,"number"],[50,51,30,49],[50,53,30,51,"nationalNumber"],[50,67,30,65],[50,69,30,67,"metadata"],[50,77,30,75],[50,78,30,76],[50,80,30,78],[51,8,31,6],[52,8,32,6],[52,15,32,13],[53,10,33,8,"nationalNumber"],[53,24,33,22],[53,26,33,24,"number"],[54,8,34,6],[54,9,34,7],[55,6,35,4],[56,6,36,4],[57,6,37,4],[58,6,38,4],[58,10,38,8,"metadata"],[58,18,38,16],[58,19,38,17,"numberingPlan"],[58,32,38,30],[58,33,38,31,"possibleLengths"],[58,48,38,46],[58,49,38,47],[58,50,38,48],[58,52,38,50],[59,8,39,6],[60,8,40,6],[60,12,40,10],[60,13,40,11,"country"],[60,20,40,18],[60,22,40,20],[61,10,41,8,"country"],[61,17,41,15],[61,20,41,18],[61,24,41,18,"getCountryByCallingCode"],[61,47,41,41],[61,48,41,41,"default"],[61,55,41,41],[61,57,41,42,"metadata"],[61,65,41,50],[61,66,41,51,"numberingPlan"],[61,79,41,64],[61,80,41,65,"callingCode"],[61,91,41,76],[61,92,41,77],[61,93,41,78],[61,95,41,80],[62,12,42,10,"nationalNumber"],[62,26,42,24],[62,28,42,26,"nationalNumber"],[62,42,42,40],[63,12,43,10,"metadata"],[63,20,43,18],[63,22,43,20,"metadata"],[64,10,44,8],[64,11,44,9],[64,12,44,10],[65,8,45,6],[67,8,47,6],[68,8,48,6],[69,8,49,6],[70,8,50,6],[71,8,51,6],[72,8,52,6],[73,8,53,6],[74,8,54,6],[75,8,55,6],[75,12,55,10],[75,13,55,11,"isPossibleIncompleteNationalNumber"],[75,47,55,45],[75,48,55,46,"nationalNumber"],[75,62,55,60],[75,64,55,62,"country"],[75,71,55,69],[75,73,55,71,"metadata"],[75,81,55,79],[75,82,55,80],[75,84,55,82],[76,10,56,8],[77,10,57,8],[77,17,57,15],[78,12,58,10,"nationalNumber"],[78,26,58,24],[78,28,58,26,"number"],[79,10,59,8],[79,11,59,9],[80,8,60,6],[81,6,61,4],[82,4,62,2],[83,4,63,2],[83,11,63,9],[84,6,64,4,"nationalNumber"],[84,20,64,18],[84,22,64,20,"nationalNumber"],[84,36,64,34],[85,6,65,4,"carrierCode"],[85,17,65,15],[85,19,65,17,"carrierCode"],[86,4,66,2],[86,5,66,3],[87,2,67,0],[89,2,69,0],[90,2,70,0],[91,2,71,0],[92,2,72,0],[93,2,73,0],[94,2,74,0],[95,2,75,0],[96,2,76,0],[97,2,77,0],[98,2,78,0],[99,2,79,0],[100,2,80,0],[101,2,81,0],[102,2,82,0],[103,2,83,0],[103,11,83,9,"shouldHaveExtractedNationalPrefix"],[103,44,83,42,"shouldHaveExtractedNationalPrefix"],[103,45,83,43,"nationalNumberBefore"],[103,65,83,63],[103,67,83,65,"nationalNumberAfter"],[103,86,83,84],[103,88,83,86,"metadata"],[103,96,83,94],[103,98,83,96],[104,4,84,2],[105,4,85,2],[106,4,86,2],[106,8,86,6],[106,12,86,6,"matchesEntirely"],[106,27,86,21],[106,28,86,21,"default"],[106,35,86,21],[106,37,86,22,"nationalNumberBefore"],[106,57,86,42],[106,59,86,44,"metadata"],[106,67,86,52],[106,68,86,53,"nationalNumberPattern"],[106,89,86,74],[106,90,86,75],[106,91,86,76],[106,92,86,77],[106,96,86,81],[106,97,86,82],[106,101,86,82,"matchesEntirely"],[106,116,86,97],[106,117,86,97,"default"],[106,124,86,97],[106,126,86,98,"nationalNumberAfter"],[106,145,86,117],[106,147,86,119,"metadata"],[106,155,86,127],[106,156,86,128,"nationalNumberPattern"],[106,177,86,149],[106,178,86,150],[106,179,86,151],[106,180,86,152],[106,182,86,154],[107,6,87,4],[107,13,87,11],[107,18,87,16],[108,4,88,2],[109,4,89,2],[110,4,90,2],[111,4,91,2],[112,4,92,2],[113,4,93,2],[114,4,94,2],[115,4,95,2],[116,4,96,2],[117,4,97,2],[118,4,98,2],[119,4,99,2],[120,4,100,2],[121,4,101,2],[122,4,102,2],[122,11,102,9],[122,15,102,13],[123,2,103,0],[124,2,104,0],[124,11,104,9,"isPossibleIncompleteNationalNumber"],[124,45,104,43,"isPossibleIncompleteNationalNumber"],[124,46,104,44,"nationalNumber"],[124,60,104,58],[124,62,104,60,"country"],[124,69,104,67],[124,71,104,69,"metadata"],[124,79,104,77],[124,81,104,79],[125,4,105,2],[125,12,105,10],[125,16,105,10,"checkNumberLength"],[125,33,105,27],[125,34,105,27,"default"],[125,41,105,27],[125,43,105,28,"nationalNumber"],[125,57,105,42],[125,59,105,44,"country"],[125,66,105,51],[125,68,105,53,"metadata"],[125,76,105,61],[125,77,105,62],[126,6,106,4],[126,11,106,9],[126,22,106,20],[127,6,107,4],[127,11,107,9],[127,27,107,25],[128,8,108,6],[129,8,109,6],[130,8,110,6],[131,8,111,6],[131,15,111,13],[131,20,111,18],[132,6,112,4],[133,8,113,6],[133,15,113,13],[133,19,113,17],[134,4,114,2],[135,2,115,0],[136,0,115,1],[136,3]],"functionMap":{"names":["<global>","extractNationalNumber","shouldHaveExtractedNationalPrefix","isPossibleIncompleteNationalNumber"],"mappings":"AAA;eCe;CDmD;AEgB;CFoB;AGC;CHW"},"hasCjsExports":false},"type":"js/module"}]}