{"dependencies":[{"name":"../metadata.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":38,"index":38}}],"key":"e+GcWU7PM4jYDq7rLAthu62vi9g=","exportNames":["*"],"imports":1}},{"name":"./mergeArrays.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":39},"end":{"line":2,"column":43,"index":82}}],"key":"+XKgDRgEDS1h1eBdvCLEtbMLNi0=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return checkNumberLength;\n    }\n  });\n  exports.checkNumberLengthForType = checkNumberLengthForType;\n  var _metadataJs = require(_dependencyMap[0], \"../metadata.js\");\n  var Metadata = _interopDefault(_metadataJs);\n  var _mergeArraysJs = require(_dependencyMap[1], \"./mergeArrays.js\");\n  var mergeArrays = _interopDefault(_mergeArraysJs);\n  function checkNumberLength(nationalNumber, country, metadata) {\n    return checkNumberLengthForType(nationalNumber, country, undefined, metadata);\n  }\n\n  // Checks whether a number is possible for a certain `country` based on the number length.\n  //\n  // This function is not supported by metadata generated with ancient versions of\n  // `libphonenumber-js` (before version `1.0.18`) which didn't include \"possible lengths\".\n  //\n  // There was also a known issue with `checkNumberLength()` function:\n  // if a number is possible only in a certain `country` among several `countries`\n  // that share the same \"country calling code\", that function would check\n  // the possibility of the phone number only in the \"main\" `country` for the \"country calling code\"\n  // and would not check if it's actually be possible in the speciifc `country`.\n  //\n  // For example, \"+1310xxxx\" numbers are valid in Canada.\n  // However, they are not possible in the US due to being too short.\n  // Since Canada and the US share the same country calling code — \"+1\" —\n  // `checkNumberLength()` function used to return not \"IS_POSSIBLE\" for \"+1310xxxx\" numbers.\n  //\n  // In such cases, when using \"/max\" metadata, `isValid()` could output `true`\n  // but at the same time `isPossible()` could output `false`, which was contradictory.\n  //\n  // See https://issuetracker.google.com/issues/335892662 for the discusson in Google's issues.\n  //\n  // The solution suggested by Google was implemented: an optional `country` argument\n  // was added to `checkNumberLength()` function. If present, that `country` will be used\n  // to check phone number length for that specific `country` rather than the \"main\" country\n  // for the shared \"country calling code\".\n  //\n  function checkNumberLengthForType(nationalNumber, country, type, metadata) {\n    // If the exact `country` is specified, it's no necessarily already selected in `metadata`.\n    // Most likely, in cases when there're multiple countries corresponding to the same\n    // \"country calling code\", the \"main\" country for that \"country calling code\" will be selected.\n    if (country) {\n      metadata = new Metadata.default(metadata.metadata);\n      metadata.selectNumberingPlan(country);\n    }\n    var type_info = metadata.type(type);\n\n    // There should always be \"<possiblePengths/>\" set for every type element.\n    // This is declared in the XML schema.\n    // For size efficiency, where a sub-description (e.g. fixed-line)\n    // has the same \"<possiblePengths/>\" as the \"general description\", this is missing,\n    // so we fall back to the \"general description\". Where no numbers of the type\n    // exist at all, there is one possible length (-1) which is guaranteed\n    // not to match the length of any real phone number.\n    var possible_lengths = type_info && type_info.possibleLengths() || metadata.possibleLengths();\n    // let local_lengths = type_info && type.possibleLengthsLocal() || metadata.possibleLengthsLocal()\n\n    // Metadata before version `1.0.18` didn't contain `possible_lengths`.\n    if (!possible_lengths) {\n      return 'IS_POSSIBLE';\n    }\n    if (type === 'FIXED_LINE_OR_MOBILE') {\n      // No such country in metadata.\n      /* istanbul ignore next */\n      if (!metadata.type('FIXED_LINE')) {\n        // The rare case has been encountered where no fixedLine data is available\n        // (true for some non-geographic entities), so we just check mobile.\n        return checkNumberLengthForType(nationalNumber, country, 'MOBILE', metadata);\n      }\n      var mobile_type = metadata.type('MOBILE');\n      if (mobile_type) {\n        // Merge the mobile data in if there was any. \"Concat\" creates a new\n        // array, it doesn't edit possible_lengths in place, so we don't need a copy.\n        // Note that when adding the possible lengths from mobile, we have\n        // to again check they aren't empty since if they are this indicates\n        // they are the same as the general desc and should be obtained from there.\n        possible_lengths = (0, mergeArrays.default)(possible_lengths, mobile_type.possibleLengths());\n        // The current list is sorted; we need to merge in the new list and\n        // re-sort (duplicates are okay). Sorting isn't so expensive because\n        // the lists are very small.\n\n        // if (local_lengths) {\n        // \tlocal_lengths = mergeArrays(local_lengths, mobile_type.possibleLengthsLocal())\n        // } else {\n        // \tlocal_lengths = mobile_type.possibleLengthsLocal()\n        // }\n      }\n    }\n    // If the type doesn't exist then return 'INVALID_LENGTH'.\n    else if (type && !type_info) {\n      return 'INVALID_LENGTH';\n    }\n    var actual_length = nationalNumber.length;\n\n    // In `libphonenumber-js` all \"local-only\" formats are dropped for simplicity.\n    // // This is safe because there is never an overlap beween the possible lengths\n    // // and the local-only lengths; this is checked at build time.\n    // if (local_lengths && local_lengths.indexOf(nationalNumber.length) >= 0)\n    // {\n    // \treturn 'IS_POSSIBLE_LOCAL_ONLY'\n    // }\n\n    var minimum_length = possible_lengths[0];\n    if (minimum_length === actual_length) {\n      return 'IS_POSSIBLE';\n    }\n    if (minimum_length > actual_length) {\n      return 'TOO_SHORT';\n    }\n    if (possible_lengths[possible_lengths.length - 1] < actual_length) {\n      return 'TOO_LONG';\n    }\n\n    // We skip the first element since we've already checked it.\n    return possible_lengths.indexOf(actual_length, 1) >= 0 ? 'IS_POSSIBLE' : 'INVALID_LENGTH';\n  }\n});","lineCount":132,"map":[[12,2,3,15,"Object"],[12,8,3,15],[12,9,3,15,"defineProperty"],[12,23,3,15],[12,24,3,15,"exports"],[12,31,3,15],[13,4,3,15,"enumerable"],[13,14,3,15],[14,4,3,15,"get"],[14,7,3,15],[14,18,3,15,"get"],[14,19,3,15],[15,6,3,15],[15,13,3,15,"checkNumberLength"],[15,30,3,15],[16,4,3,15],[17,2,3,15],[18,2,33,0,"exports"],[18,9,33,0],[18,10,33,0,"checkNumberLengthForType"],[18,34,33,0],[18,37,33,0,"checkNumberLengthForType"],[18,61,33,0],[19,2,1,0],[19,6,1,0,"_metadataJs"],[19,17,1,0],[19,20,1,0,"require"],[19,27,1,0],[19,28,1,0,"_dependencyMap"],[19,42,1,0],[20,2,1,0],[20,6,1,0,"Metadata"],[20,14,1,0],[20,17,1,0,"_interopDefault"],[20,32,1,0],[20,33,1,0,"_metadataJs"],[20,44,1,0],[21,2,2,0],[21,6,2,0,"_mergeArraysJs"],[21,20,2,0],[21,23,2,0,"require"],[21,30,2,0],[21,31,2,0,"_dependencyMap"],[21,45,2,0],[22,2,2,0],[22,6,2,0,"mergeArrays"],[22,17,2,0],[22,20,2,0,"_interopDefault"],[22,35,2,0],[22,36,2,0,"_mergeArraysJs"],[22,50,2,0],[23,2,3,15],[23,11,3,24,"checkNumberLength"],[23,28,3,41,"checkNumberLength"],[23,29,3,42,"nationalNumber"],[23,43,3,56],[23,45,3,58,"country"],[23,52,3,65],[23,54,3,67,"metadata"],[23,62,3,75],[23,64,3,77],[24,4,4,2],[24,11,4,9,"checkNumberLengthForType"],[24,35,4,33],[24,36,4,34,"nationalNumber"],[24,50,4,48],[24,52,4,50,"country"],[24,59,4,57],[24,61,4,59,"undefined"],[24,70,4,68],[24,72,4,70,"metadata"],[24,80,4,78],[24,81,4,79],[25,2,5,0],[27,2,7,0],[28,2,8,0],[29,2,9,0],[30,2,10,0],[31,2,11,0],[32,2,12,0],[33,2,13,0],[34,2,14,0],[35,2,15,0],[36,2,16,0],[37,2,17,0],[38,2,18,0],[39,2,19,0],[40,2,20,0],[41,2,21,0],[42,2,22,0],[43,2,23,0],[44,2,24,0],[45,2,25,0],[46,2,26,0],[47,2,27,0],[48,2,28,0],[49,2,29,0],[50,2,30,0],[51,2,31,0],[52,2,32,0],[53,2,33,7],[53,11,33,16,"checkNumberLengthForType"],[53,35,33,40,"checkNumberLengthForType"],[53,36,33,41,"nationalNumber"],[53,50,33,55],[53,52,33,57,"country"],[53,59,33,64],[53,61,33,66,"type"],[53,65,33,70],[53,67,33,72,"metadata"],[53,75,33,80],[53,77,33,82],[54,4,34,2],[55,4,35,2],[56,4,36,2],[57,4,37,2],[57,8,37,6,"country"],[57,15,37,13],[57,17,37,15],[58,6,38,4,"metadata"],[58,14,38,12],[58,17,38,15],[58,21,38,19,"Metadata"],[58,29,38,27],[58,30,38,27,"default"],[58,37,38,27],[58,38,38,28,"metadata"],[58,46,38,36],[58,47,38,37,"metadata"],[58,55,38,45],[58,56,38,46],[59,6,39,4,"metadata"],[59,14,39,12],[59,15,39,13,"selectNumberingPlan"],[59,34,39,32],[59,35,39,33,"country"],[59,42,39,40],[59,43,39,41],[60,4,40,2],[61,4,41,2],[61,8,41,6,"type_info"],[61,17,41,15],[61,20,41,18,"metadata"],[61,28,41,26],[61,29,41,27,"type"],[61,33,41,31],[61,34,41,32,"type"],[61,38,41,36],[61,39,41,37],[63,4,43,2],[64,4,44,2],[65,4,45,2],[66,4,46,2],[67,4,47,2],[68,4,48,2],[69,4,49,2],[70,4,50,2],[70,8,50,6,"possible_lengths"],[70,24,50,22],[70,27,50,25,"type_info"],[70,36,50,34],[70,40,50,38,"type_info"],[70,49,50,47],[70,50,50,48,"possibleLengths"],[70,65,50,63],[70,66,50,64],[70,67,50,65],[70,71,50,69,"metadata"],[70,79,50,77],[70,80,50,78,"possibleLengths"],[70,95,50,93],[70,96,50,94],[70,97,50,95],[71,4,51,2],[73,4,53,2],[74,4,54,2],[74,8,54,6],[74,9,54,7,"possible_lengths"],[74,25,54,23],[74,27,54,25],[75,6,55,4],[75,13,55,11],[75,26,55,24],[76,4,56,2],[77,4,57,2],[77,8,57,6,"type"],[77,12,57,10],[77,17,57,15],[77,39,57,37],[77,41,57,39],[78,6,58,4],[79,6,59,4],[80,6,60,4],[80,10,60,8],[80,11,60,9,"metadata"],[80,19,60,17],[80,20,60,18,"type"],[80,24,60,22],[80,25,60,23],[80,37,60,35],[80,38,60,36],[80,40,60,38],[81,8,61,6],[82,8,62,6],[83,8,63,6],[83,15,63,13,"checkNumberLengthForType"],[83,39,63,37],[83,40,63,38,"nationalNumber"],[83,54,63,52],[83,56,63,54,"country"],[83,63,63,61],[83,65,63,63],[83,73,63,71],[83,75,63,73,"metadata"],[83,83,63,81],[83,84,63,82],[84,6,64,4],[85,6,65,4],[85,10,65,8,"mobile_type"],[85,21,65,19],[85,24,65,22,"metadata"],[85,32,65,30],[85,33,65,31,"type"],[85,37,65,35],[85,38,65,36],[85,46,65,44],[85,47,65,45],[86,6,66,4],[86,10,66,8,"mobile_type"],[86,21,66,19],[86,23,66,21],[87,8,67,6],[88,8,68,6],[89,8,69,6],[90,8,70,6],[91,8,71,6],[92,8,72,6,"possible_lengths"],[92,24,72,22],[92,27,72,25],[92,31,72,25,"mergeArrays"],[92,42,72,36],[92,43,72,36,"default"],[92,50,72,36],[92,52,72,37,"possible_lengths"],[92,68,72,53],[92,70,72,55,"mobile_type"],[92,81,72,66],[92,82,72,67,"possibleLengths"],[92,97,72,82],[92,98,72,83],[92,99,72,84],[92,100,72,85],[93,8,73,6],[94,8,74,6],[95,8,75,6],[97,8,77,6],[98,8,78,6],[99,8,79,6],[100,8,80,6],[101,8,81,6],[102,6,82,4],[103,4,83,2],[104,4,84,2],[105,4,84,2],[105,9,85,7],[105,13,85,11,"type"],[105,17,85,15],[105,21,85,19],[105,22,85,20,"type_info"],[105,31,85,29],[105,33,85,31],[106,6,86,4],[106,13,86,11],[106,29,86,27],[107,4,87,2],[108,4,88,2],[108,8,88,6,"actual_length"],[108,21,88,19],[108,24,88,22,"nationalNumber"],[108,38,88,36],[108,39,88,37,"length"],[108,45,88,43],[110,4,90,2],[111,4,91,2],[112,4,92,2],[113,4,93,2],[114,4,94,2],[115,4,95,2],[116,4,96,2],[118,4,98,2],[118,8,98,6,"minimum_length"],[118,22,98,20],[118,25,98,23,"possible_lengths"],[118,41,98,39],[118,42,98,40],[118,43,98,41],[118,44,98,42],[119,4,99,2],[119,8,99,6,"minimum_length"],[119,22,99,20],[119,27,99,25,"actual_length"],[119,40,99,38],[119,42,99,40],[120,6,100,4],[120,13,100,11],[120,26,100,24],[121,4,101,2],[122,4,102,2],[122,8,102,6,"minimum_length"],[122,22,102,20],[122,25,102,23,"actual_length"],[122,38,102,36],[122,40,102,38],[123,6,103,4],[123,13,103,11],[123,24,103,22],[124,4,104,2],[125,4,105,2],[125,8,105,6,"possible_lengths"],[125,24,105,22],[125,25,105,23,"possible_lengths"],[125,41,105,39],[125,42,105,40,"length"],[125,48,105,46],[125,51,105,49],[125,52,105,50],[125,53,105,51],[125,56,105,54,"actual_length"],[125,69,105,67],[125,71,105,69],[126,6,106,4],[126,13,106,11],[126,23,106,21],[127,4,107,2],[129,4,109,2],[130,4,110,2],[130,11,110,9,"possible_lengths"],[130,27,110,25],[130,28,110,26,"indexOf"],[130,35,110,33],[130,36,110,34,"actual_length"],[130,49,110,47],[130,51,110,49],[130,52,110,50],[130,53,110,51],[130,57,110,55],[130,58,110,56],[130,61,110,59],[130,74,110,72],[130,77,110,75],[130,93,110,91],[131,2,111,0],[132,0,111,1],[132,3]],"functionMap":{"names":["<global>","checkNumberLength","checkNumberLengthForType"],"mappings":"AAA;eCE;CDE;OE4B;CF8E"},"hasCjsExports":false},"type":"js/module"}]}