{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"]}},{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"]}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":54},"end":{"line":2,"column":40,"index":94}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"]}},{"name":"@/utils/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":96},"end":{"line":3,"column":43,"index":139}}],"key":"dzXjryHTvdSCDFGj8HDj8YCDHm4=","exportNames":["*"]}},{"name":"@/utils/auth/store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":141},"end":{"line":4,"column":50,"index":191}}],"key":"VzDMA11jGiXP9AFTRgw0CVGaxUs=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.syncNotificationPreference = syncNotificationPreference;\n  var _asyncToGenerator2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/asyncToGenerator\"));\n  var Notifications = _interopRequireWildcard(require(_dependencyMap[2], \"expo-notifications\"));\n  var _reactNative = require(_dependencyMap[3], \"react-native\");\n  var _api = require(_dependencyMap[4], \"@/utils/api\");\n  var _store = require(_dependencyMap[5], \"@/utils/auth/store\");\n  function _interopRequireWildcard(e, t) { if (\"function\" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t in e) \"default\" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]); return f; })(e, t); }\n  // Best-effort sync; safe to call without awaiting in UI\n  function syncNotificationPreference(_x) {\n    return _syncNotificationPreference.apply(this, arguments);\n  }\n  function _syncNotificationPreference() {\n    _syncNotificationPreference = (0, _asyncToGenerator2.default)(function* (enabled) {\n      try {\n        var token = null;\n        if (enabled) {\n          try {\n            // On SDK 53+, projectId is auto-resolved when using EAS Updates. Fallback without.\n            var res = yield Notifications.getExpoPushTokenAsync();\n            token = res?.data || null;\n          } catch (e) {\n            // No token available (e.g., missing config); still sync enabled flag\n            token = null;\n          }\n        }\n        var auth = _store.useAuthStore.getState().auth;\n        var userId = auth?.user?.id || auth?.user?.auth_user_id || null;\n        yield (0, _api.apiFetchJson)('/api/notifications/preferences', {\n          method: 'POST',\n          body: {\n            enabled: !!enabled,\n            token,\n            platform: _reactNative.Platform.OS,\n            userId\n          }\n        });\n      } catch (e) {\n        // Non-fatal; log and continue\n        console.warn('[syncNotificationPreference] Failed', e?.message);\n      }\n    });\n    return _syncNotificationPreference.apply(this, arguments);\n  }\n});","lineCount":49,"map":[[8,2,1,0],[8,6,1,0,"Notifications"],[8,19,1,0],[8,22,1,0,"_interopRequireWildcard"],[8,45,1,0],[8,46,1,0,"require"],[8,53,1,0],[8,54,1,0,"_dependencyMap"],[8,68,1,0],[9,2,2,0],[9,6,2,0,"_reactNative"],[9,18,2,0],[9,21,2,0,"require"],[9,28,2,0],[9,29,2,0,"_dependencyMap"],[9,43,2,0],[10,2,3,0],[10,6,3,0,"_api"],[10,10,3,0],[10,13,3,0,"require"],[10,20,3,0],[10,21,3,0,"_dependencyMap"],[10,35,3,0],[11,2,4,0],[11,6,4,0,"_store"],[11,12,4,0],[11,15,4,0,"require"],[11,22,4,0],[11,23,4,0,"_dependencyMap"],[11,37,4,0],[12,2,4,50],[12,11,4,50,"_interopRequireWildcard"],[12,35,4,50,"e"],[12,36,4,50],[12,38,4,50,"t"],[12,39,4,50],[12,68,4,50,"WeakMap"],[12,75,4,50],[12,81,4,50,"r"],[12,82,4,50],[12,89,4,50,"WeakMap"],[12,96,4,50],[12,100,4,50,"n"],[12,101,4,50],[12,108,4,50,"WeakMap"],[12,115,4,50],[12,127,4,50,"_interopRequireWildcard"],[12,150,4,50],[12,162,4,50,"_interopRequireWildcard"],[12,163,4,50,"e"],[12,164,4,50],[12,166,4,50,"t"],[12,167,4,50],[12,176,4,50,"t"],[12,177,4,50],[12,181,4,50,"e"],[12,182,4,50],[12,186,4,50,"e"],[12,187,4,50],[12,188,4,50,"__esModule"],[12,198,4,50],[12,207,4,50,"e"],[12,208,4,50],[12,214,4,50,"o"],[12,215,4,50],[12,217,4,50,"i"],[12,218,4,50],[12,220,4,50,"f"],[12,221,4,50],[12,226,4,50,"__proto__"],[12,235,4,50],[12,243,4,50,"default"],[12,250,4,50],[12,252,4,50,"e"],[12,253,4,50],[12,270,4,50,"e"],[12,271,4,50],[12,294,4,50,"e"],[12,295,4,50],[12,320,4,50,"e"],[12,321,4,50],[12,330,4,50,"f"],[12,331,4,50],[12,337,4,50,"o"],[12,338,4,50],[12,341,4,50,"t"],[12,342,4,50],[12,345,4,50,"n"],[12,346,4,50],[12,349,4,50,"r"],[12,350,4,50],[12,358,4,50,"o"],[12,359,4,50],[12,360,4,50,"has"],[12,363,4,50],[12,364,4,50,"e"],[12,365,4,50],[12,375,4,50,"o"],[12,376,4,50],[12,377,4,50,"get"],[12,380,4,50],[12,381,4,50,"e"],[12,382,4,50],[12,385,4,50,"o"],[12,386,4,50],[12,387,4,50,"set"],[12,390,4,50],[12,391,4,50,"e"],[12,392,4,50],[12,394,4,50,"f"],[12,395,4,50],[12,409,4,50,"_t"],[12,411,4,50],[12,415,4,50,"e"],[12,416,4,50],[12,432,4,50,"_t"],[12,434,4,50],[12,441,4,50,"hasOwnProperty"],[12,455,4,50],[12,456,4,50,"call"],[12,460,4,50],[12,461,4,50,"e"],[12,462,4,50],[12,464,4,50,"_t"],[12,466,4,50],[12,473,4,50,"i"],[12,474,4,50],[12,478,4,50,"o"],[12,479,4,50],[12,482,4,50,"Object"],[12,488,4,50],[12,489,4,50,"defineProperty"],[12,503,4,50],[12,508,4,50,"Object"],[12,514,4,50],[12,515,4,50,"getOwnPropertyDescriptor"],[12,539,4,50],[12,540,4,50,"e"],[12,541,4,50],[12,543,4,50,"_t"],[12,545,4,50],[12,552,4,50,"i"],[12,553,4,50],[12,554,4,50,"get"],[12,557,4,50],[12,561,4,50,"i"],[12,562,4,50],[12,563,4,50,"set"],[12,566,4,50],[12,570,4,50,"o"],[12,571,4,50],[12,572,4,50,"f"],[12,573,4,50],[12,575,4,50,"_t"],[12,577,4,50],[12,579,4,50,"i"],[12,580,4,50],[12,584,4,50,"f"],[12,585,4,50],[12,586,4,50,"_t"],[12,588,4,50],[12,592,4,50,"e"],[12,593,4,50],[12,594,4,50,"_t"],[12,596,4,50],[12,607,4,50,"f"],[12,608,4,50],[12,613,4,50,"e"],[12,614,4,50],[12,616,4,50,"t"],[12,617,4,50],[13,2,6,0],[14,2,6,0],[14,11,7,22,"syncNotificationPreference"],[14,37,7,48,"syncNotificationPreference"],[14,38,7,48,"_x"],[14,40,7,48],[15,4,7,48],[15,11,7,48,"_syncNotificationPreference"],[15,38,7,48],[15,39,7,48,"apply"],[15,44,7,48],[15,51,7,48,"arguments"],[15,60,7,48],[16,2,7,48],[17,2,7,48],[17,11,7,48,"_syncNotificationPreference"],[17,39,7,48],[18,4,7,48,"_syncNotificationPreference"],[18,31,7,48],[18,38,7,48,"_asyncToGenerator2"],[18,56,7,48],[18,57,7,48,"default"],[18,64,7,48],[18,66,7,7],[18,77,7,49,"enabled"],[18,84,7,56],[18,86,7,58],[19,6,8,2],[19,10,8,6],[20,8,9,4],[20,12,9,8,"token"],[20,17,9,13],[20,20,9,16],[20,24,9,20],[21,8,10,4],[21,12,10,8,"enabled"],[21,19,10,15],[21,21,10,17],[22,10,11,6],[22,14,11,10],[23,12,12,8],[24,12,13,8],[24,16,13,14,"res"],[24,19,13,17],[24,28,13,26,"Notifications"],[24,41,13,39],[24,42,13,40,"getExpoPushTokenAsync"],[24,63,13,61],[24,64,13,62],[24,65,13,63],[25,12,14,8,"token"],[25,17,14,13],[25,20,14,16,"res"],[25,23,14,19],[25,25,14,21,"data"],[25,29,14,25],[25,33,14,29],[25,37,14,33],[26,10,15,6],[26,11,15,7],[26,12,15,8],[26,19,15,15,"e"],[26,20,15,16],[26,22,15,18],[27,12,16,8],[28,12,17,8,"token"],[28,17,17,13],[28,20,17,16],[28,24,17,20],[29,10,18,6],[30,8,19,4],[31,8,21,4],[31,12,21,10,"auth"],[31,16,21,14],[31,19,21,17,"useAuthStore"],[31,38,21,29],[31,39,21,30,"getState"],[31,47,21,38],[31,48,21,39],[31,49,21,40],[31,50,21,41,"auth"],[31,54,21,45],[32,8,22,4],[32,12,22,10,"userId"],[32,18,22,16],[32,21,22,19,"auth"],[32,25,22,23],[32,27,22,25,"user"],[32,31,22,29],[32,33,22,31,"id"],[32,35,22,33],[32,39,22,37,"auth"],[32,43,22,41],[32,45,22,43,"user"],[32,49,22,47],[32,51,22,49,"auth_user_id"],[32,63,22,61],[32,67,22,65],[32,71,22,69],[33,8,24,4],[33,14,24,10],[33,18,24,10,"apiFetchJson"],[33,35,24,22],[33,37,24,23],[33,69,24,55],[33,71,24,57],[34,10,25,6,"method"],[34,16,25,12],[34,18,25,14],[34,24,25,20],[35,10,26,6,"body"],[35,14,26,10],[35,16,26,12],[36,12,27,8,"enabled"],[36,19,27,15],[36,21,27,17],[36,22,27,18],[36,23,27,19,"enabled"],[36,30,27,26],[37,12,28,8,"token"],[37,17,28,13],[38,12,29,8,"platform"],[38,20,29,16],[38,22,29,18,"Platform"],[38,43,29,26],[38,44,29,27,"OS"],[38,46,29,29],[39,12,30,8,"userId"],[40,10,31,6],[41,8,32,4],[41,9,32,5],[41,10,32,6],[42,6,33,2],[42,7,33,3],[42,8,33,4],[42,15,33,11,"e"],[42,16,33,12],[42,18,33,14],[43,8,34,4],[44,8,35,4,"console"],[44,15,35,11],[44,16,35,12,"warn"],[44,20,35,16],[44,21,35,17],[44,58,35,54],[44,60,35,56,"e"],[44,61,35,57],[44,63,35,59,"message"],[44,70,35,66],[44,71,35,67],[45,6,36,2],[46,4,37,0],[46,5,37,1],[47,4,37,1],[47,11,37,1,"_syncNotificationPreference"],[47,38,37,1],[47,39,37,1,"apply"],[47,44,37,1],[47,51,37,1,"arguments"],[47,60,37,1],[48,2,37,1],[49,0,37,1],[49,3]],"functionMap":{"names":["<global>","syncNotificationPreference"],"mappings":"AAA;OCM;CD8B"}},"type":"js/module"}]}