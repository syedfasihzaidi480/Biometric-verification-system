{"dependencies":[{"name":"./extractPhoneContext.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":162,"index":162}}],"key":"Xga1p3fH0ukpG+QAzvkfqNDHSBU=","exportNames":["*"],"imports":1}},{"name":"../ParseError.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":163},"end":{"line":2,"column":42,"index":205}}],"key":"ILkNK15CFnJn1Xd8R5zNaR98lbU=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return extractFormattedPhoneNumberFromPossibleRfc3966NumberUri;\n    }\n  });\n  var _extractPhoneContextJs = require(_dependencyMap[0], \"./extractPhoneContext.js\");\n  var extractPhoneContext = _interopDefault(_extractPhoneContextJs);\n  var _ParseErrorJs = require(_dependencyMap[1], \"../ParseError.js\");\n  var ParseError = _interopDefault(_ParseErrorJs);\n  /**\r\n   * @param  {string} numberToParse\r\n   * @param  {string} nationalNumber\r\n   * @return {}\r\n   */\n  function extractFormattedPhoneNumberFromPossibleRfc3966NumberUri(numberToParse, _ref) {\n    var extractFormattedPhoneNumber = _ref.extractFormattedPhoneNumber;\n    var phoneContext = (0, extractPhoneContext.default)(numberToParse);\n    if (!(0, _extractPhoneContextJs.isPhoneContextValid)(phoneContext)) {\n      throw new ParseError.default('NOT_A_NUMBER');\n    }\n    var phoneNumberString;\n    if (phoneContext === null) {\n      // Extract a possible number from the string passed in.\n      // (this strips leading characters that could not be the start of a phone number)\n      phoneNumberString = extractFormattedPhoneNumber(numberToParse) || '';\n    } else {\n      phoneNumberString = '';\n\n      // If the phone context contains a phone number prefix, we need to capture\n      // it, whereas domains will be ignored.\n      if (phoneContext.charAt(0) === _extractPhoneContextJs.PLUS_SIGN) {\n        phoneNumberString += phoneContext;\n      }\n\n      // Now append everything between the \"tel:\" prefix and the phone-context.\n      // This should include the national number, an optional extension or\n      // isdn-subaddress component. Note we also handle the case when \"tel:\" is\n      // missing, as we have seen in some of the phone number inputs.\n      // In that case, we append everything from the beginning.\n      var indexOfRfc3966Prefix = numberToParse.indexOf(_extractPhoneContextJs.RFC3966_PREFIX_);\n      var indexOfNationalNumber;\n      // RFC 3966 \"tel:\" prefix is preset at this stage because\n      // `isPhoneContextValid()` requires it to be present.\n      /* istanbul ignore else */\n      if (indexOfRfc3966Prefix >= 0) {\n        indexOfNationalNumber = indexOfRfc3966Prefix + _extractPhoneContextJs.RFC3966_PREFIX_.length;\n      } else {\n        indexOfNationalNumber = 0;\n      }\n      var indexOfPhoneContext = numberToParse.indexOf(_extractPhoneContextJs.RFC3966_PHONE_CONTEXT_);\n      phoneNumberString += numberToParse.substring(indexOfNationalNumber, indexOfPhoneContext);\n    }\n\n    // Delete the isdn-subaddress and everything after it if it is present.\n    // Note extension won't appear at the same time with isdn-subaddress\n    // according to paragraph 5.3 of the RFC3966 spec.\n    var indexOfIsdn = phoneNumberString.indexOf(_extractPhoneContextJs.RFC3966_ISDN_SUBADDRESS_);\n    if (indexOfIsdn > 0) {\n      phoneNumberString = phoneNumberString.substring(0, indexOfIsdn);\n    }\n    // If both phone context and isdn-subaddress are absent but other\n    // parameters are present, the parameters are left in nationalNumber.\n    // This is because we are concerned about deleting content from a potential\n    // number string when there is no strong evidence that the number is\n    // actually written in RFC3966.\n\n    if (phoneNumberString !== '') {\n      return phoneNumberString;\n    }\n  }\n});","lineCount":83,"map":[[12,2,9,15,"Object"],[12,8,9,15],[12,9,9,15,"defineProperty"],[12,23,9,15],[12,24,9,15,"exports"],[12,31,9,15],[13,4,9,15,"enumerable"],[13,14,9,15],[14,4,9,15,"get"],[14,7,9,15],[14,18,9,15,"get"],[14,19,9,15],[15,6,9,15],[15,13,9,15,"extractFormattedPhoneNumberFromPossibleRfc3966NumberUri"],[15,68,9,15],[16,4,9,15],[17,2,9,15],[18,2,1,0],[18,6,1,0,"_extractPhoneContextJs"],[18,28,1,0],[18,31,1,0,"require"],[18,38,1,0],[18,39,1,0,"_dependencyMap"],[18,53,1,0],[19,2,1,0],[19,6,1,0,"extractPhoneContext"],[19,25,1,0],[19,28,1,0,"_interopDefault"],[19,43,1,0],[19,44,1,0,"_extractPhoneContextJs"],[19,66,1,0],[20,2,2,0],[20,6,2,0,"_ParseErrorJs"],[20,19,2,0],[20,22,2,0,"require"],[20,29,2,0],[20,30,2,0,"_dependencyMap"],[20,44,2,0],[21,2,2,0],[21,6,2,0,"ParseError"],[21,16,2,0],[21,19,2,0,"_interopDefault"],[21,34,2,0],[21,35,2,0,"_ParseErrorJs"],[21,48,2,0],[22,2,4,0],[23,0,5,0],[24,0,6,0],[25,0,7,0],[26,0,8,0],[27,2,9,15],[27,11,9,24,"extractFormattedPhoneNumberFromPossibleRfc3966NumberUri"],[27,66,9,79,"extractFormattedPhoneNumberFromPossibleRfc3966NumberUri"],[27,67,9,80,"numberToParse"],[27,80,9,93],[27,82,9,95,"_ref"],[27,86,9,99],[27,88,9,101],[28,4,10,2],[28,8,10,6,"extractFormattedPhoneNumber"],[28,35,10,33],[28,38,10,36,"_ref"],[28,42,10,40],[28,43,10,41,"extractFormattedPhoneNumber"],[28,70,10,68],[29,4,11,2],[29,8,11,6,"phoneContext"],[29,20,11,18],[29,23,11,21],[29,27,11,21,"extractPhoneContext"],[29,46,11,40],[29,47,11,40,"default"],[29,54,11,40],[29,56,11,41,"numberToParse"],[29,69,11,54],[29,70,11,55],[30,4,12,2],[30,8,12,6],[30,9,12,7],[30,13,12,7,"isPhoneContextValid"],[30,35,12,26],[30,36,12,26,"isPhoneContextValid"],[30,55,12,26],[30,57,12,27,"phoneContext"],[30,69,12,39],[30,70,12,40],[30,72,12,42],[31,6,13,4],[31,12,13,10],[31,16,13,14,"ParseError"],[31,26,13,24],[31,27,13,24,"default"],[31,34,13,24],[31,35,13,25],[31,49,13,39],[31,50,13,40],[32,4,14,2],[33,4,15,2],[33,8,15,6,"phoneNumberString"],[33,25,15,23],[34,4,16,2],[34,8,16,6,"phoneContext"],[34,20,16,18],[34,25,16,23],[34,29,16,27],[34,31,16,29],[35,6,17,4],[36,6,18,4],[37,6,19,4,"phoneNumberString"],[37,23,19,21],[37,26,19,24,"extractFormattedPhoneNumber"],[37,53,19,51],[37,54,19,52,"numberToParse"],[37,67,19,65],[37,68,19,66],[37,72,19,70],[37,74,19,72],[38,4,20,2],[38,5,20,3],[38,11,20,9],[39,6,21,4,"phoneNumberString"],[39,23,21,21],[39,26,21,24],[39,28,21,26],[41,6,23,4],[42,6,24,4],[43,6,25,4],[43,10,25,8,"phoneContext"],[43,22,25,20],[43,23,25,21,"charAt"],[43,29,25,27],[43,30,25,28],[43,31,25,29],[43,32,25,30],[43,37,25,35,"PLUS_SIGN"],[43,59,25,44],[43,60,25,44,"PLUS_SIGN"],[43,69,25,44],[43,71,25,46],[44,8,26,6,"phoneNumberString"],[44,25,26,23],[44,29,26,27,"phoneContext"],[44,41,26,39],[45,6,27,4],[47,6,29,4],[48,6,30,4],[49,6,31,4],[50,6,32,4],[51,6,33,4],[52,6,34,4],[52,10,34,8,"indexOfRfc3966Prefix"],[52,30,34,28],[52,33,34,31,"numberToParse"],[52,46,34,44],[52,47,34,45,"indexOf"],[52,54,34,52],[52,55,34,53,"RFC3966_PREFIX_"],[52,77,34,68],[52,78,34,68,"RFC3966_PREFIX_"],[52,93,34,68],[52,94,34,69],[53,6,35,4],[53,10,35,8,"indexOfNationalNumber"],[53,31,35,29],[54,6,36,4],[55,6,37,4],[56,6,38,4],[57,6,39,4],[57,10,39,8,"indexOfRfc3966Prefix"],[57,30,39,28],[57,34,39,32],[57,35,39,33],[57,37,39,35],[58,8,40,6,"indexOfNationalNumber"],[58,29,40,27],[58,32,40,30,"indexOfRfc3966Prefix"],[58,52,40,50],[58,55,40,53,"RFC3966_PREFIX_"],[58,77,40,68],[58,78,40,68,"RFC3966_PREFIX_"],[58,93,40,68],[58,94,40,69,"length"],[58,100,40,75],[59,6,41,4],[59,7,41,5],[59,13,41,11],[60,8,42,6,"indexOfNationalNumber"],[60,29,42,27],[60,32,42,30],[60,33,42,31],[61,6,43,4],[62,6,44,4],[62,10,44,8,"indexOfPhoneContext"],[62,29,44,27],[62,32,44,30,"numberToParse"],[62,45,44,43],[62,46,44,44,"indexOf"],[62,53,44,51],[62,54,44,52,"RFC3966_PHONE_CONTEXT_"],[62,76,44,74],[62,77,44,74,"RFC3966_PHONE_CONTEXT_"],[62,99,44,74],[62,100,44,75],[63,6,45,4,"phoneNumberString"],[63,23,45,21],[63,27,45,25,"numberToParse"],[63,40,45,38],[63,41,45,39,"substring"],[63,50,45,48],[63,51,45,49,"indexOfNationalNumber"],[63,72,45,70],[63,74,45,72,"indexOfPhoneContext"],[63,93,45,91],[63,94,45,92],[64,4,46,2],[66,4,48,2],[67,4,49,2],[68,4,50,2],[69,4,51,2],[69,8,51,6,"indexOfIsdn"],[69,19,51,17],[69,22,51,20,"phoneNumberString"],[69,39,51,37],[69,40,51,38,"indexOf"],[69,47,51,45],[69,48,51,46,"RFC3966_ISDN_SUBADDRESS_"],[69,70,51,70],[69,71,51,70,"RFC3966_ISDN_SUBADDRESS_"],[69,95,51,70],[69,96,51,71],[70,4,52,2],[70,8,52,6,"indexOfIsdn"],[70,19,52,17],[70,22,52,20],[70,23,52,21],[70,25,52,23],[71,6,53,4,"phoneNumberString"],[71,23,53,21],[71,26,53,24,"phoneNumberString"],[71,43,53,41],[71,44,53,42,"substring"],[71,53,53,51],[71,54,53,52],[71,55,53,53],[71,57,53,55,"indexOfIsdn"],[71,68,53,66],[71,69,53,67],[72,4,54,2],[73,4,55,2],[74,4,56,2],[75,4,57,2],[76,4,58,2],[77,4,59,2],[79,4,61,2],[79,8,61,6,"phoneNumberString"],[79,25,61,23],[79,30,61,28],[79,32,61,30],[79,34,61,32],[80,6,62,4],[80,13,62,11,"phoneNumberString"],[80,30,62,28],[81,4,63,2],[82,2,64,0],[83,0,64,1],[83,3]],"functionMap":{"names":["<global>","extractFormattedPhoneNumberFromPossibleRfc3966NumberUri"],"mappings":"AAA;eCQ;CDuD"},"hasCjsExports":false},"type":"js/module"}]}