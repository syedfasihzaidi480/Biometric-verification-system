{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"]}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.VelocityTracker = void 0;\n  var _classCallCheck2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\"));\n  var _createClass2 = _interopRequireDefault(require(_dependencyMap[2], \"@babel/runtime/helpers/createClass\"));\n  var VelocityTracker = exports.VelocityTracker = /*#__PURE__*/function () {\n    function VelocityTracker() {\n      (0, _classCallCheck2.default)(this, VelocityTracker);\n      this.history = [];\n      this.lastPosition = undefined;\n      this.lastTimestamp = undefined;\n    }\n    return (0, _createClass2.default)(VelocityTracker, [{\n      key: \"add\",\n      value: function add(position) {\n        var timestamp = new Date().valueOf();\n        if (this.lastPosition && this.lastTimestamp && timestamp > this.lastTimestamp) {\n          var diff = position - this.lastPosition;\n          if (diff > 0.001 || diff < -0.001) {\n            this.history.push(diff / (timestamp - this.lastTimestamp));\n          }\n        }\n        this.lastPosition = position;\n        this.lastTimestamp = timestamp;\n      }\n    }, {\n      key: \"estimateSpeed\",\n      value: function estimateSpeed() {\n        var finalTrend = this.history.slice(-3);\n        var sum = finalTrend.reduce((r, v) => r + v, 0);\n        return sum / finalTrend.length;\n      }\n    }, {\n      key: \"reset\",\n      value: function reset() {\n        this.history = [];\n        this.lastPosition = undefined;\n        this.lastTimestamp = undefined;\n      }\n    }]);\n  }();\n});","lineCount":45,"map":[[9,6,1,13,"VelocityTracker"],[9,21,1,28],[9,24,1,28,"exports"],[9,31,1,28],[9,32,1,28,"VelocityTracker"],[9,47,1,28],[10,4,6,2],[10,13,6,2,"VelocityTracker"],[10,29,6,2],[10,31,6,16],[11,6,6,16],[11,10,6,16,"_classCallCheck2"],[11,26,6,16],[11,27,6,16,"default"],[11,34,6,16],[11,42,6,16,"VelocityTracker"],[11,57,6,16],[12,6,7,4],[12,10,7,8],[12,11,7,9,"history"],[12,18,7,16],[12,21,7,19],[12,23,7,21],[13,6,8,4],[13,10,8,8],[13,11,8,9,"lastPosition"],[13,23,8,21],[13,26,8,24,"undefined"],[13,35,8,33],[14,6,9,4],[14,10,9,8],[14,11,9,9,"lastTimestamp"],[14,24,9,22],[14,27,9,25,"undefined"],[14,36,9,34],[15,4,10,2],[16,4,10,3],[16,15,10,3,"_createClass2"],[16,28,10,3],[16,29,10,3,"default"],[16,36,10,3],[16,38,10,3,"VelocityTracker"],[16,53,10,3],[17,6,10,3,"key"],[17,9,10,3],[18,6,10,3,"value"],[18,11,10,3],[18,13,12,2],[18,22,12,2,"add"],[18,25,12,5,"add"],[18,26,12,6,"position"],[18,34,12,22],[18,36,12,24],[19,8,13,4],[19,12,13,10,"timestamp"],[19,21,13,19],[19,24,13,22],[19,28,13,26,"Date"],[19,32,13,30],[19,33,13,31],[19,34,13,32],[19,35,13,33,"valueOf"],[19,42,13,40],[19,43,13,41],[19,44,13,42],[20,8,14,4],[20,12,14,8],[20,16,14,12],[20,17,14,13,"lastPosition"],[20,29,14,25],[20,33,14,29],[20,37,14,33],[20,38,14,34,"lastTimestamp"],[20,51,14,47],[20,55,14,51,"timestamp"],[20,64,14,60],[20,67,14,63],[20,71,14,67],[20,72,14,68,"lastTimestamp"],[20,85,14,81],[20,87,14,83],[21,10,15,6],[21,14,15,12,"diff"],[21,18,15,16],[21,21,15,19,"position"],[21,29,15,27],[21,32,15,30],[21,36,15,34],[21,37,15,35,"lastPosition"],[21,49,15,47],[22,10,16,6],[22,14,16,10,"diff"],[22,18,16,14],[22,21,16,17],[22,26,16,22],[22,30,16,26,"diff"],[22,34,16,30],[22,37,16,33],[22,38,16,34],[22,43,16,39],[22,45,16,41],[23,12,17,8],[23,16,17,12],[23,17,17,13,"history"],[23,24,17,20],[23,25,17,21,"push"],[23,29,17,25],[23,30,17,26,"diff"],[23,34,17,30],[23,38,17,34,"timestamp"],[23,47,17,43],[23,50,17,46],[23,54,17,50],[23,55,17,51,"lastTimestamp"],[23,68,17,64],[23,69,17,65],[23,70,17,66],[24,10,18,6],[25,8,19,4],[26,8,20,4],[26,12,20,8],[26,13,20,9,"lastPosition"],[26,25,20,21],[26,28,20,24,"position"],[26,36,20,32],[27,8,21,4],[27,12,21,8],[27,13,21,9,"lastTimestamp"],[27,26,21,22],[27,29,21,25,"timestamp"],[27,38,21,34],[28,6,22,2],[29,4,22,3],[30,6,22,3,"key"],[30,9,22,3],[31,6,22,3,"value"],[31,11,22,3],[31,13,24,2],[31,22,24,2,"estimateSpeed"],[31,35,24,15,"estimateSpeed"],[31,36,24,15],[31,38,24,18],[32,8,25,4],[32,12,25,10,"finalTrend"],[32,22,25,20],[32,25,25,23],[32,29,25,27],[32,30,25,28,"history"],[32,37,25,35],[32,38,25,36,"slice"],[32,43,25,41],[32,44,25,42],[32,45,25,43],[32,46,25,44],[32,47,25,45],[33,8,26,4],[33,12,26,10,"sum"],[33,15,26,13],[33,18,26,16,"finalTrend"],[33,28,26,26],[33,29,26,27,"reduce"],[33,35,26,33],[33,36,26,34],[33,37,26,35,"r"],[33,38,26,36],[33,40,26,38,"v"],[33,41,26,39],[33,46,26,44,"r"],[33,47,26,45],[33,50,26,48,"v"],[33,51,26,49],[33,53,26,51],[33,54,26,52],[33,55,26,53],[34,8,27,4],[34,15,27,11,"sum"],[34,18,27,14],[34,21,27,17,"finalTrend"],[34,31,27,27],[34,32,27,28,"length"],[34,38,27,34],[35,6,28,2],[36,4,28,3],[37,6,28,3,"key"],[37,9,28,3],[38,6,28,3,"value"],[38,11,28,3],[38,13,30,2],[38,22,30,2,"reset"],[38,27,30,7,"reset"],[38,28,30,7],[38,30,30,10],[39,8,31,4],[39,12,31,8],[39,13,31,9,"history"],[39,20,31,16],[39,23,31,19],[39,25,31,21],[40,8,32,4],[40,12,32,8],[40,13,32,9,"lastPosition"],[40,25,32,21],[40,28,32,24,"undefined"],[40,37,32,33],[41,8,33,4],[41,12,33,8],[41,13,33,9,"lastTimestamp"],[41,26,33,22],[41,29,33,25,"undefined"],[41,38,33,34],[42,6,34,2],[43,4,34,3],[44,2,34,3],[45,0,34,3],[45,3]],"functionMap":{"names":["<global>","VelocityTracker","VelocityTracker#constructor","VelocityTracker#add","VelocityTracker#estimateSpeed","finalTrend.reduce$argument_0","VelocityTracker#reset"],"mappings":"AAA,OC;ECK;GDI;EEE;GFU;EGE;kCCE,eD;GHE;EKE;GLI;CDC"}},"type":"js/module"}]}