{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":31,"index":31}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@uploadcare/upload-client","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":32},"end":{"line":2,"column":56,"index":88}}],"key":"O2obDCato+1wiO91AqaigM1B07U=","exportNames":["*"],"imports":1}},{"name":"@/utils/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":89},"end":{"line":3,"column":53,"index":142}}],"key":"dzXjryHTvdSCDFGj8HDj8YCDHm4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"useUpload\", {\n    enumerable: true,\n    get: function () {\n      return useUpload;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _expoVirtualEnv = require(_dependencyMap[2], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[3], \"react\");\n  var React = _interopNamespace(_react);\n  var _uploadcareUploadClient = require(_dependencyMap[4], \"@uploadcare/upload-client\");\n  var _utilsApi = require(_dependencyMap[5], \"@/utils/api\");\n  var client = new _uploadcareUploadClient.UploadClient({\n    publicKey: _expoVirtualEnv.env.EXPO_PUBLIC_UPLOADCARE_PUBLIC_KEY\n  });\n  function useUpload() {\n    _s();\n    var _React$useState = React.useState(false),\n      _React$useState2 = (0, _slicedToArray.default)(_React$useState, 2),\n      loading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n    var upload = React.useCallback(/*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator.default)(function* (input) {\n        try {\n          setLoading(true);\n          var response;\n          if (\"reactNativeAsset\" in input && input.reactNativeAsset) {\n            var asset = input.reactNativeAsset;\n            if (asset.file) {\n              var formData = new FormData();\n              formData.append(\"file\", asset.file);\n              response = yield (0, _utilsApi.apiFetch)(\"/_create/api/upload/\", {\n                method: \"POST\",\n                body: formData\n              });\n            } else {\n              // Fallback to presigned Uploadcare upload\n              var presignRes = yield (0, _utilsApi.apiFetchJson)(\"/_create/api/upload/presign/\", {\n                method: \"POST\"\n              });\n              var _ref2 = presignRes || {},\n                secureSignature = _ref2.secureSignature,\n                secureExpire = _ref2.secureExpire;\n              var result = yield client.uploadFile(asset, {\n                fileName: asset.name ?? asset.uri.split(\"/\").pop(),\n                contentType: asset.mimeType,\n                secureSignature,\n                secureExpire\n              });\n              return {\n                url: `${_expoVirtualEnv.env.EXPO_PUBLIC_BASE_CREATE_USER_CONTENT_URL}/${result.uuid}/`,\n                mimeType: result.mimeType || null\n              };\n            }\n          } else if (\"url\" in input) {\n            response = yield (0, _utilsApi.apiFetch)(\"/_create/api/upload/\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                url: input.url\n              })\n            });\n          } else if (\"base64\" in input) {\n            response = yield (0, _utilsApi.apiFetch)(\"/_create/api/upload/\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                base64: input.base64\n              })\n            });\n          } else {\n            response = yield (0, _utilsApi.apiFetch)(\"/_create/api/upload/\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/octet-stream\"\n              },\n              body: input.buffer\n            });\n          }\n          if (!response.ok) {\n            if (response.status === 413) {\n              throw new Error(\"Upload failed: File too large.\");\n            }\n            throw new Error(\"Upload failed\");\n          }\n          var data = yield response.json();\n          return {\n            url: data.url,\n            mimeType: data.mimeType || null\n          };\n        } catch (uploadError) {\n          if (uploadError instanceof Error) {\n            return {\n              error: uploadError.message\n            };\n          }\n          if (typeof uploadError === \"string\") {\n            return {\n              error: uploadError\n            };\n          }\n          return {\n            error: \"Upload failed\"\n          };\n        } finally {\n          setLoading(false);\n        }\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }(), []);\n    return [upload, {\n      loading\n    }];\n  }\n  _s(useUpload, \"Qv5HJbJjGdV0KEKce0q6WdLwZl4=\");\n  var _default = useUpload;\n});","lineCount":159,"map":[[28,2,89,0,"Object"],[28,8,89,0],[28,9,89,0,"defineProperty"],[28,23,89,0],[28,24,89,0,"exports"],[28,31,89,0],[29,4,89,0,"enumerable"],[29,14,89,0],[30,4,89,0,"get"],[30,7,89,0],[30,18,89,0,"get"],[30,19,89,0],[31,6,89,0],[31,13,89,0,"_default"],[31,21,89,0],[32,4,89,0],[33,2,89,0],[34,2,88,0,"Object"],[34,8,88,0],[34,9,88,0,"defineProperty"],[34,23,88,0],[34,24,88,0,"exports"],[34,31,88,0],[35,4,88,0,"enumerable"],[35,14,88,0],[36,4,88,0,"get"],[36,7,88,0],[36,18,88,0,"get"],[36,19,88,0],[37,6,88,0],[37,13,88,9,"useUpload"],[37,22,88,18],[38,4,88,18],[39,2,88,18],[40,2,88,21],[40,6,88,21,"_babelRuntimeHelpersAsyncToGenerator"],[40,42,88,21],[40,45,88,21,"require"],[40,52,88,21],[40,53,88,21,"_dependencyMap"],[40,67,88,21],[41,2,88,21],[41,6,88,21,"_asyncToGenerator"],[41,23,88,21],[41,26,88,21,"_interopDefault"],[41,41,88,21],[41,42,88,21,"_babelRuntimeHelpersAsyncToGenerator"],[41,78,88,21],[42,2,88,21],[42,6,88,21,"_babelRuntimeHelpersSlicedToArray"],[42,39,88,21],[42,42,88,21,"require"],[42,49,88,21],[42,50,88,21,"_dependencyMap"],[42,64,88,21],[43,2,88,21],[43,6,88,21,"_slicedToArray"],[43,20,88,21],[43,23,88,21,"_interopDefault"],[43,38,88,21],[43,39,88,21,"_babelRuntimeHelpersSlicedToArray"],[43,72,88,21],[44,2,88,21],[44,6,88,21,"_expoVirtualEnv"],[44,21,88,21],[44,24,88,21,"require"],[44,31,88,21],[44,32,88,21,"_dependencyMap"],[44,46,88,21],[45,2,1,0],[45,6,1,0,"_react"],[45,12,1,0],[45,15,1,0,"require"],[45,22,1,0],[45,23,1,0,"_dependencyMap"],[45,37,1,0],[46,2,1,0],[46,6,1,0,"React"],[46,11,1,0],[46,14,1,0,"_interopNamespace"],[46,31,1,0],[46,32,1,0,"_react"],[46,38,1,0],[47,2,2,0],[47,6,2,0,"_uploadcareUploadClient"],[47,29,2,0],[47,32,2,0,"require"],[47,39,2,0],[47,40,2,0,"_dependencyMap"],[47,54,2,0],[48,2,3,0],[48,6,3,0,"_utilsApi"],[48,15,3,0],[48,18,3,0,"require"],[48,25,3,0],[48,26,3,0,"_dependencyMap"],[48,40,3,0],[49,2,4,0],[49,6,4,6,"client"],[49,12,4,12],[49,15,4,15],[49,19,4,19,"UploadClient"],[49,42,4,31],[49,43,4,31,"UploadClient"],[49,55,4,31],[49,56,4,32],[50,4,4,34,"publicKey"],[50,13,4,43],[50,15,4,43,"_expoVirtualEnv"],[50,30,4,43],[50,31,4,43,"env"],[50,34,4,43],[50,35,4,43,"EXPO_PUBLIC_UPLOADCARE_PUBLIC_KEY"],[51,2,4,91],[51,3,4,92],[51,4,4,93],[52,2,6,0],[52,11,6,9,"useUpload"],[52,20,6,18,"useUpload"],[52,21,6,18],[52,23,6,21],[53,4,6,21,"_s"],[53,6,6,21],[54,4,7,2],[54,8,7,2,"_React$useState"],[54,23,7,2],[54,26,7,32,"React"],[54,31,7,37],[54,32,7,38,"useState"],[54,40,7,46],[54,41,7,47],[54,46,7,52],[54,47,7,53],[55,6,7,53,"_React$useState2"],[55,22,7,53],[55,29,7,53,"_slicedToArray"],[55,43,7,53],[55,44,7,53,"default"],[55,51,7,53],[55,53,7,53,"_React$useState"],[55,68,7,53],[56,6,7,9,"loading"],[56,13,7,16],[56,16,7,16,"_React$useState2"],[56,32,7,16],[57,6,7,18,"setLoading"],[57,16,7,28],[57,19,7,28,"_React$useState2"],[57,35,7,28],[58,4,8,2],[58,8,8,8,"upload"],[58,14,8,14],[58,17,8,17,"React"],[58,22,8,22],[58,23,8,23,"useCallback"],[58,34,8,34],[59,6,8,34],[59,10,8,34,"_ref"],[59,14,8,34],[59,21,8,34,"_asyncToGenerator"],[59,38,8,34],[59,39,8,34,"default"],[59,46,8,34],[59,48,8,35],[59,59,8,42,"input"],[59,64,8,47],[59,66,8,52],[60,8,9,4],[60,12,9,8],[61,10,10,6,"setLoading"],[61,20,10,16],[61,21,10,17],[61,25,10,21],[61,26,10,22],[62,10,11,6],[62,14,11,10,"response"],[62,22,11,18],[63,10,13,6],[63,14,13,10],[63,32,13,28],[63,36,13,32,"input"],[63,41,13,37],[63,45,13,41,"input"],[63,50,13,46],[63,51,13,47,"reactNativeAsset"],[63,67,13,63],[63,69,13,65],[64,12,14,8],[64,16,14,12,"asset"],[64,21,14,17],[64,24,14,20,"input"],[64,29,14,25],[64,30,14,26,"reactNativeAsset"],[64,46,14,42],[65,12,16,8],[65,16,16,12,"asset"],[65,21,16,17],[65,22,16,18,"file"],[65,26,16,22],[65,28,16,24],[66,14,17,10],[66,18,17,16,"formData"],[66,26,17,24],[66,29,17,27],[66,33,17,31,"FormData"],[66,41,17,39],[66,42,17,40],[66,43,17,41],[67,14,18,10,"formData"],[67,22,18,18],[67,23,18,19,"append"],[67,29,18,25],[67,30,18,26],[67,36,18,32],[67,38,18,34,"asset"],[67,43,18,39],[67,44,18,40,"file"],[67,48,18,44],[67,49,18,45],[68,14,20,10,"response"],[68,22,20,18],[68,31,20,27],[68,35,20,27,"apiFetch"],[68,44,20,35],[68,45,20,35,"apiFetch"],[68,53,20,35],[68,55,20,36],[68,77,20,58],[68,79,20,60],[69,16,21,12,"method"],[69,22,21,18],[69,24,21,20],[69,30,21,26],[70,16,22,12,"body"],[70,20,22,16],[70,22,22,18,"formData"],[71,14,23,10],[71,15,23,11],[71,16,23,12],[72,12,24,8],[72,13,24,9],[72,19,24,15],[73,14,25,10],[74,14,26,10],[74,18,26,16,"presignRes"],[74,28,26,26],[74,37,26,35],[74,41,26,35,"apiFetchJson"],[74,50,26,47],[74,51,26,47,"apiFetchJson"],[74,63,26,47],[74,65,26,48],[74,95,26,78],[74,97,26,80],[75,16,27,12,"method"],[75,22,27,18],[75,24,27,20],[76,14,28,10],[76,15,28,11],[76,16,28,12],[77,14,29,10],[77,18,29,10,"_ref2"],[77,23,29,10],[77,26,29,52,"presignRes"],[77,36,29,62],[77,40,29,66],[77,41,29,67],[77,42,29,68],[78,16,29,18,"secureSignature"],[78,31,29,33],[78,34,29,33,"_ref2"],[78,39,29,33],[78,40,29,18,"secureSignature"],[78,55,29,33],[79,16,29,35,"secureExpire"],[79,28,29,47],[79,31,29,47,"_ref2"],[79,36,29,47],[79,37,29,35,"secureExpire"],[79,49,29,47],[80,14,31,10],[80,18,31,16,"result"],[80,24,31,22],[80,33,31,31,"client"],[80,39,31,37],[80,40,31,38,"uploadFile"],[80,50,31,48],[80,51,31,49,"asset"],[80,56,31,54],[80,58,31,56],[81,16,32,12,"fileName"],[81,24,32,20],[81,26,32,22,"asset"],[81,31,32,27],[81,32,32,28,"name"],[81,36,32,32],[81,40,32,36,"asset"],[81,45,32,41],[81,46,32,42,"uri"],[81,49,32,45],[81,50,32,46,"split"],[81,55,32,51],[81,56,32,52],[81,59,32,55],[81,60,32,56],[81,61,32,57,"pop"],[81,64,32,60],[81,65,32,61],[81,66,32,62],[82,16,33,12,"contentType"],[82,27,33,23],[82,29,33,25,"asset"],[82,34,33,30],[82,35,33,31,"mimeType"],[82,43,33,39],[83,16,34,12,"secureSignature"],[83,31,34,27],[84,16,35,12,"secureExpire"],[85,14,36,10],[85,15,36,11],[85,16,36,12],[86,14,37,10],[86,21,37,17],[87,16,37,19,"url"],[87,19,37,22],[87,21,37,24],[87,24,37,24,"_expoVirtualEnv"],[87,39,37,24],[87,40,37,24,"env"],[87,43,37,24],[87,44,37,24,"EXPO_PUBLIC_BASE_CREATE_USER_CONTENT_URL"],[87,84,37,24],[87,88,37,83,"result"],[87,94,37,89],[87,95,37,90,"uuid"],[87,99,37,94],[87,102,37,97],[88,16,37,99,"mimeType"],[88,24,37,107],[88,26,37,109,"result"],[88,32,37,115],[88,33,37,116,"mimeType"],[88,41,37,124],[88,45,37,128],[89,14,37,133],[89,15,37,134],[90,12,38,8],[91,10,39,6],[91,11,39,7],[91,17,39,13],[91,21,39,17],[91,26,39,22],[91,30,39,26,"input"],[91,35,39,31],[91,37,39,33],[92,12,40,8,"response"],[92,20,40,16],[92,29,40,25],[92,33,40,25,"apiFetch"],[92,42,40,33],[92,43,40,33,"apiFetch"],[92,51,40,33],[92,53,40,34],[92,75,40,56],[92,77,40,58],[93,14,41,10,"method"],[93,20,41,16],[93,22,41,18],[93,28,41,24],[94,14,42,10,"headers"],[94,21,42,17],[94,23,42,19],[95,16,43,12],[95,30,43,26],[95,32,43,28],[96,14,44,10],[96,15,44,11],[97,14,45,10,"body"],[97,18,45,14],[97,20,45,16,"JSON"],[97,24,45,20],[97,25,45,21,"stringify"],[97,34,45,30],[97,35,45,31],[98,16,45,33,"url"],[98,19,45,36],[98,21,45,38,"input"],[98,26,45,43],[98,27,45,44,"url"],[99,14,45,48],[99,15,45,49],[100,12,46,8],[100,13,46,9],[100,14,46,10],[101,10,47,6],[101,11,47,7],[101,17,47,13],[101,21,47,17],[101,29,47,25],[101,33,47,29,"input"],[101,38,47,34],[101,40,47,36],[102,12,48,8,"response"],[102,20,48,16],[102,29,48,25],[102,33,48,25,"apiFetch"],[102,42,48,33],[102,43,48,33,"apiFetch"],[102,51,48,33],[102,53,48,34],[102,75,48,56],[102,77,48,58],[103,14,49,10,"method"],[103,20,49,16],[103,22,49,18],[103,28,49,24],[104,14,50,10,"headers"],[104,21,50,17],[104,23,50,19],[105,16,51,12],[105,30,51,26],[105,32,51,28],[106,14,52,10],[106,15,52,11],[107,14,53,10,"body"],[107,18,53,14],[107,20,53,16,"JSON"],[107,24,53,20],[107,25,53,21,"stringify"],[107,34,53,30],[107,35,53,31],[108,16,53,33,"base64"],[108,22,53,39],[108,24,53,41,"input"],[108,29,53,46],[108,30,53,47,"base64"],[109,14,53,54],[109,15,53,55],[110,12,54,8],[110,13,54,9],[110,14,54,10],[111,10,55,6],[111,11,55,7],[111,17,55,13],[112,12,56,8,"response"],[112,20,56,16],[112,29,56,25],[112,33,56,25,"apiFetch"],[112,42,56,33],[112,43,56,33,"apiFetch"],[112,51,56,33],[112,53,56,34],[112,75,56,56],[112,77,56,58],[113,14,57,10,"method"],[113,20,57,16],[113,22,57,18],[113,28,57,24],[114,14,58,10,"headers"],[114,21,58,17],[114,23,58,19],[115,16,59,12],[115,30,59,26],[115,32,59,28],[116,14,60,10],[116,15,60,11],[117,14,61,10,"body"],[117,18,61,14],[117,20,61,16,"input"],[117,25,61,21],[117,26,61,22,"buffer"],[118,12,62,8],[118,13,62,9],[118,14,62,10],[119,10,63,6],[120,10,64,6],[120,14,64,10],[120,15,64,11,"response"],[120,23,64,19],[120,24,64,20,"ok"],[120,26,64,22],[120,28,64,24],[121,12,65,8],[121,16,65,12,"response"],[121,24,65,20],[121,25,65,21,"status"],[121,31,65,27],[121,36,65,32],[121,39,65,35],[121,41,65,37],[122,14,66,10],[122,20,66,16],[122,24,66,20,"Error"],[122,29,66,25],[122,30,66,26],[122,62,66,58],[122,63,66,59],[123,12,67,8],[124,12,68,8],[124,18,68,14],[124,22,68,18,"Error"],[124,27,68,23],[124,28,68,24],[124,43,68,39],[124,44,68,40],[125,10,69,6],[126,10,70,6],[126,14,70,12,"data"],[126,18,70,16],[126,27,70,25,"response"],[126,35,70,33],[126,36,70,34,"json"],[126,40,70,38],[126,41,70,39],[126,42,70,40],[127,10,71,6],[127,17,71,13],[128,12,71,15,"url"],[128,15,71,18],[128,17,71,20,"data"],[128,21,71,24],[128,22,71,25,"url"],[128,25,71,28],[129,12,71,30,"mimeType"],[129,20,71,38],[129,22,71,40,"data"],[129,26,71,44],[129,27,71,45,"mimeType"],[129,35,71,53],[129,39,71,57],[130,10,71,62],[130,11,71,63],[131,8,72,4],[131,9,72,5],[131,10,72,6],[131,17,72,13,"uploadError"],[131,28,72,24],[131,30,72,26],[132,10,73,6],[132,14,73,10,"uploadError"],[132,25,73,21],[132,37,73,33,"Error"],[132,42,73,38],[132,44,73,40],[133,12,74,8],[133,19,74,15],[134,14,74,17,"error"],[134,19,74,22],[134,21,74,24,"uploadError"],[134,32,74,35],[134,33,74,36,"message"],[135,12,74,44],[135,13,74,45],[136,10,75,6],[137,10,76,6],[137,14,76,10],[137,21,76,17,"uploadError"],[137,32,76,28],[137,37,76,33],[137,45,76,41],[137,47,76,43],[138,12,77,8],[138,19,77,15],[139,14,77,17,"error"],[139,19,77,22],[139,21,77,24,"uploadError"],[140,12,77,36],[140,13,77,37],[141,10,78,6],[142,10,79,6],[142,17,79,13],[143,12,79,15,"error"],[143,17,79,20],[143,19,79,22],[144,10,79,38],[144,11,79,39],[145,8,80,4],[145,9,80,5],[145,18,80,14],[146,10,81,6,"setLoading"],[146,20,81,16],[146,21,81,17],[146,26,81,22],[146,27,81,23],[147,8,82,4],[148,6,83,2],[148,7,83,3],[149,6,83,3],[149,23,83,3,"_x"],[149,25,83,3],[150,8,83,3],[150,15,83,3,"_ref"],[150,19,83,3],[150,20,83,3,"apply"],[150,25,83,3],[150,32,83,3,"arguments"],[150,41,83,3],[151,6,83,3],[152,4,83,3],[152,9,83,5],[152,11,83,7],[152,12,83,8],[153,4,85,2],[153,11,85,9],[153,12,85,10,"upload"],[153,18,85,16],[153,20,85,18],[154,6,85,20,"loading"],[155,4,85,28],[155,5,85,29],[155,6,85,30],[156,2,86,0],[157,2,86,1,"_s"],[157,4,86,1],[157,5,6,9,"useUpload"],[157,14,6,18],[158,2,89,0],[158,6,89,0,"_default"],[158,14,89,0],[158,17,89,15,"useUpload"],[158,26,89,24],[159,0,89,25],[159,3]],"functionMap":{"names":["<global>","useUpload","upload"],"mappings":"AAA;ACK;mCCE;GD2E;CDG"},"hasCjsExports":false},"type":"js/module"}]}