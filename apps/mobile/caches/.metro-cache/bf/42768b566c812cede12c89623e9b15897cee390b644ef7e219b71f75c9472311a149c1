{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"]}},{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"]}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":40,"index":40}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.API_BASE = void 0;\n  exports.apiFetch = apiFetch;\n  exports.apiFetchJson = apiFetchJson;\n  exports.toApiUrl = exports.default = void 0;\n  var _asyncToGenerator2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/asyncToGenerator\"));\n  var _env2 = require(_dependencyMap[2], \"expo/virtual/env\");\n  var _reactNative = require(_dependencyMap[3], \"react-native\");\n  // Compute API base URL for mobile (Expo) environments\n  // Prefer EXPO_PUBLIC_API_URL; otherwise use sensible localhost defaults per platform\n  var API_BASE = exports.API_BASE = _env2.env.EXPO_PUBLIC_API_URL && _env2.env.EXPO_PUBLIC_API_URL.replace(/\\/$/, '') || (_reactNative.Platform.OS === 'android' ? 'http://10.0.2.2:4000' : 'http://localhost:4000');\n\n  // Helper to build absolute URL from a path or pass-through absolute URLs\n  var toApiUrl = path => {\n    if (!path) return API_BASE;\n    if (/^https?:\\/\\//i.test(path)) return path;\n    var normalizedPath = path.startsWith('/') ? path : `/${path}`;\n    return `${API_BASE}${normalizedPath}`;\n  };\n\n  // Smart fetch wrapper for API calls from React Native\n  // - Prefixes API_BASE\n  // - Sets JSON headers/body when a plain object is provided\n  // - Avoids setting Content-Type for FormData (let RN set boundaries)\n  exports.toApiUrl = toApiUrl;\n  function apiFetch(_x) {\n    return _apiFetch.apply(this, arguments);\n  } // Convenience to fetch JSON with basic error surface\n  function _apiFetch() {\n    _apiFetch = (0, _asyncToGenerator2.default)(function* (path) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var url = toApiUrl(path);\n      var opts = {\n        ...options\n      };\n\n      // Normalize headers\n      var headers = {\n        ...(opts.headers || {})\n      };\n\n      // Ensure cookies are included so API sessions stay intact\n      if (typeof opts.credentials === 'undefined') {\n        opts.credentials = 'include';\n      }\n\n      // If body is a plain object, JSON-encode it\n      var isPlainObject = opts.body && typeof opts.body === 'object' && !(opts.body instanceof FormData);\n      if (isPlainObject) {\n        headers['Content-Type'] = headers['Content-Type'] || 'application/json';\n        opts.body = JSON.stringify(opts.body);\n      }\n\n      // If body is FormData, ensure we don't manually set Content-Type\n      if (opts.body instanceof FormData) {\n        // React Native will set the correct multipart boundary automatically\n        if ('Content-Type' in headers) delete headers['Content-Type'];\n      }\n      opts.headers = headers;\n      var res = yield fetch(url, opts);\n      return res;\n    });\n    return _apiFetch.apply(this, arguments);\n  }\n  function apiFetchJson(_x2) {\n    return _apiFetchJson.apply(this, arguments);\n  }\n  function _apiFetchJson() {\n    _apiFetchJson = (0, _asyncToGenerator2.default)(function* (path) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      try {\n        var res = yield apiFetch(path, options);\n        var data = null;\n        try {\n          data = yield res.json();\n        } catch (e) {\n          // Response might not be JSON; that's okay\n        }\n        if (!res.ok) {\n          var message = data && (typeof data.error === 'string' ? data.error : data?.error?.message) || `${res.status} ${res.statusText || 'Request failed'}`;\n          var err = new Error(message);\n          // attach a few useful fields for the UI\n          // @ts-ignore\n          err.status = res.status;\n          // @ts-ignore\n          err.data = data;\n          throw err;\n        }\n        return data;\n      } catch (err) {\n        // Normalize common RN network error\n        if (err instanceof TypeError && /network request failed/i.test(err.message)) {\n          var e = new Error('Network request failed');\n          // @ts-ignore\n          e.code = 'NETWORK_ERROR';\n          throw e;\n        }\n        throw err;\n      }\n    });\n    return _apiFetchJson.apply(this, arguments);\n  }\n  var _default = exports.default = apiFetch;\n});","lineCount":108,"map":[[12,2,1,0],[12,6,1,0,"_reactNative"],[12,18,1,0],[12,21,1,0,"require"],[12,28,1,0],[12,29,1,0,"_dependencyMap"],[12,43,1,0],[13,2,3,0],[14,2,4,0],[15,2,5,7],[15,6,5,13,"API_BASE"],[15,14,5,21],[15,17,5,21,"exports"],[15,24,5,21],[15,25,5,21,"API_BASE"],[15,33,5,21],[15,36,5,25,"_env2"],[15,41,5,25],[15,42,5,25,"env"],[15,45,5,25],[15,46,5,25,"EXPO_PUBLIC_API_URL"],[15,65,5,25],[15,69,5,60,"_env2"],[15,74,5,60],[15,75,5,60,"env"],[15,78,5,60],[15,79,5,60,"EXPO_PUBLIC_API_URL"],[15,98,5,60],[15,99,5,92,"replace"],[15,106,5,99],[15,107,5,100],[15,112,5,105],[15,114,5,107],[15,116,5,109],[15,117,5,110],[15,122,6,6,"Platform"],[15,143,6,14],[15,144,6,15,"OS"],[15,146,6,17],[15,151,6,22],[15,160,6,31],[15,163,6,34],[15,185,6,56],[15,188,6,59],[15,211,6,82],[15,212,6,83],[17,2,8,0],[18,2,9,7],[18,6,9,13,"toApiUrl"],[18,14,9,21],[18,17,9,25,"path"],[18,21,9,29],[18,25,9,34],[19,4,10,2],[19,8,10,6],[19,9,10,7,"path"],[19,13,10,11],[19,15,10,13],[19,22,10,20,"API_BASE"],[19,30,10,28],[20,4,11,2],[20,8,11,6],[20,23,11,21],[20,24,11,22,"test"],[20,28,11,26],[20,29,11,27,"path"],[20,33,11,31],[20,34,11,32],[20,36,11,34],[20,43,11,41,"path"],[20,47,11,45],[21,4,12,2],[21,8,12,8,"normalizedPath"],[21,22,12,22],[21,25,12,25,"path"],[21,29,12,29],[21,30,12,30,"startsWith"],[21,40,12,40],[21,41,12,41],[21,44,12,44],[21,45,12,45],[21,48,12,48,"path"],[21,52,12,52],[21,55,12,55],[21,59,12,59,"path"],[21,63,12,63],[21,65,12,65],[22,4,13,2],[22,11,13,9],[22,14,13,12,"API_BASE"],[22,22,13,20],[22,25,13,23,"normalizedPath"],[22,39,13,37],[22,41,13,39],[23,2,14,0],[23,3,14,1],[25,2,16,0],[26,2,17,0],[27,2,18,0],[28,2,19,0],[29,2,19,0,"exports"],[29,9,19,0],[29,10,19,0,"toApiUrl"],[29,18,19,0],[29,21,19,0,"toApiUrl"],[29,29,19,0],[30,2,19,0],[30,11,20,22,"apiFetch"],[30,19,20,30,"apiFetch"],[30,20,20,30,"_x"],[30,22,20,30],[31,4,20,30],[31,11,20,30,"_apiFetch"],[31,20,20,30],[31,21,20,30,"apply"],[31,26,20,30],[31,33,20,30,"arguments"],[31,42,20,30],[32,2,20,30],[32,4,51,0],[33,2,51,0],[33,11,51,0,"_apiFetch"],[33,21,51,0],[34,4,51,0,"_apiFetch"],[34,13,51,0],[34,20,51,0,"_asyncToGenerator2"],[34,38,51,0],[34,39,51,0,"default"],[34,46,51,0],[34,48,20,7],[34,59,20,31,"path"],[34,63,20,35],[34,65,20,51],[35,6,20,51],[35,10,20,37,"options"],[35,17,20,44],[35,20,20,44,"arguments"],[35,29,20,44],[35,30,20,44,"length"],[35,36,20,44],[35,44,20,44,"arguments"],[35,53,20,44],[35,61,20,44,"undefined"],[35,70,20,44],[35,73,20,44,"arguments"],[35,82,20,44],[35,88,20,47],[35,89,20,48],[35,90,20,49],[36,6,21,2],[36,10,21,8,"url"],[36,13,21,11],[36,16,21,14,"toApiUrl"],[36,24,21,22],[36,25,21,23,"path"],[36,29,21,27],[36,30,21,28],[37,6,22,2],[37,10,22,8,"opts"],[37,14,22,12],[37,17,22,15],[38,8,22,17],[38,11,22,20,"options"],[39,6,22,28],[39,7,22,29],[41,6,24,2],[42,6,25,2],[42,10,25,8,"headers"],[42,17,25,15],[42,20,25,18],[43,8,25,20],[43,12,25,24,"opts"],[43,16,25,28],[43,17,25,29,"headers"],[43,24,25,36],[43,28,25,40],[43,29,25,41],[43,30,25,42],[44,6,25,44],[44,7,25,45],[46,6,27,2],[47,6,28,2],[47,10,28,6],[47,17,28,13,"opts"],[47,21,28,17],[47,22,28,18,"credentials"],[47,33,28,29],[47,38,28,34],[47,49,28,45],[47,51,28,47],[48,8,29,4,"opts"],[48,12,29,8],[48,13,29,9,"credentials"],[48,24,29,20],[48,27,29,23],[48,36,29,32],[49,6,30,2],[51,6,32,2],[52,6,33,2],[52,10,33,8,"isPlainObject"],[52,23,33,21],[52,26,33,24,"opts"],[52,30,33,28],[52,31,33,29,"body"],[52,35,33,33],[52,39,33,37],[52,46,33,44,"opts"],[52,50,33,48],[52,51,33,49,"body"],[52,55,33,53],[52,60,33,58],[52,68,33,66],[52,72,33,70],[52,74,33,72,"opts"],[52,78,33,76],[52,79,33,77,"body"],[52,83,33,81],[52,95,33,93,"FormData"],[52,103,33,101],[52,104,33,102],[53,6,34,2],[53,10,34,6,"isPlainObject"],[53,23,34,19],[53,25,34,21],[54,8,35,4,"headers"],[54,15,35,11],[54,16,35,12],[54,30,35,26],[54,31,35,27],[54,34,35,30,"headers"],[54,41,35,37],[54,42,35,38],[54,56,35,52],[54,57,35,53],[54,61,35,57],[54,79,35,75],[55,8,36,4,"opts"],[55,12,36,8],[55,13,36,9,"body"],[55,17,36,13],[55,20,36,16,"JSON"],[55,24,36,20],[55,25,36,21,"stringify"],[55,34,36,30],[55,35,36,31,"opts"],[55,39,36,35],[55,40,36,36,"body"],[55,44,36,40],[55,45,36,41],[56,6,37,2],[58,6,39,2],[59,6,40,2],[59,10,40,6,"opts"],[59,14,40,10],[59,15,40,11,"body"],[59,19,40,15],[59,31,40,27,"FormData"],[59,39,40,35],[59,41,40,37],[60,8,41,4],[61,8,42,4],[61,12,42,8],[61,26,42,22],[61,30,42,26,"headers"],[61,37,42,33],[61,39,42,35],[61,46,42,42,"headers"],[61,53,42,49],[61,54,42,50],[61,68,42,64],[61,69,42,65],[62,6,43,2],[63,6,45,2,"opts"],[63,10,45,6],[63,11,45,7,"headers"],[63,18,45,14],[63,21,45,17,"headers"],[63,28,45,24],[64,6,47,2],[64,10,47,8,"res"],[64,13,47,11],[64,22,47,20,"fetch"],[64,27,47,25],[64,28,47,26,"url"],[64,31,47,29],[64,33,47,31,"opts"],[64,37,47,35],[64,38,47,36],[65,6,48,2],[65,13,48,9,"res"],[65,16,48,12],[66,4,49,0],[66,5,49,1],[67,4,49,1],[67,11,49,1,"_apiFetch"],[67,20,49,1],[67,21,49,1,"apply"],[67,26,49,1],[67,33,49,1,"arguments"],[67,42,49,1],[68,2,49,1],[69,2,49,1],[69,11,52,22,"apiFetchJson"],[69,23,52,34,"apiFetchJson"],[69,24,52,34,"_x2"],[69,27,52,34],[70,4,52,34],[70,11,52,34,"_apiFetchJson"],[70,24,52,34],[70,25,52,34,"apply"],[70,30,52,34],[70,37,52,34,"arguments"],[70,46,52,34],[71,2,52,34],[72,2,52,34],[72,11,52,34,"_apiFetchJson"],[72,25,52,34],[73,4,52,34,"_apiFetchJson"],[73,17,52,34],[73,24,52,34,"_asyncToGenerator2"],[73,42,52,34],[73,43,52,34,"default"],[73,50,52,34],[73,52,52,7],[73,63,52,35,"path"],[73,67,52,39],[73,69,52,55],[74,6,52,55],[74,10,52,41,"options"],[74,17,52,48],[74,20,52,48,"arguments"],[74,29,52,48],[74,30,52,48,"length"],[74,36,52,48],[74,44,52,48,"arguments"],[74,53,52,48],[74,61,52,48,"undefined"],[74,70,52,48],[74,73,52,48,"arguments"],[74,82,52,48],[74,88,52,51],[74,89,52,52],[74,90,52,53],[75,6,53,2],[75,10,53,6],[76,8,54,4],[76,12,54,10,"res"],[76,15,54,13],[76,24,54,22,"apiFetch"],[76,32,54,30],[76,33,54,31,"path"],[76,37,54,35],[76,39,54,37,"options"],[76,46,54,44],[76,47,54,45],[77,8,55,4],[77,12,55,8,"data"],[77,16,55,12],[77,19,55,15],[77,23,55,19],[78,8,56,4],[78,12,56,8],[79,10,57,6,"data"],[79,14,57,10],[79,23,57,19,"res"],[79,26,57,22],[79,27,57,23,"json"],[79,31,57,27],[79,32,57,28],[79,33,57,29],[80,8,58,4],[80,9,58,5],[80,10,58,6],[80,17,58,13,"e"],[80,18,58,14],[80,20,58,16],[81,10,59,6],[82,8,59,6],[83,8,62,4],[83,12,62,8],[83,13,62,9,"res"],[83,16,62,12],[83,17,62,13,"ok"],[83,19,62,15],[83,21,62,17],[84,10,63,6],[84,14,63,12,"message"],[84,21,63,19],[84,24,64,9,"data"],[84,28,64,13],[84,33,64,18],[84,40,64,25,"data"],[84,44,64,29],[84,45,64,30,"error"],[84,50,64,35],[84,55,64,40],[84,63,64,48],[84,66,64,51,"data"],[84,70,64,55],[84,71,64,56,"error"],[84,76,64,61],[84,79,64,64,"data"],[84,83,64,68],[84,85,64,70,"error"],[84,90,64,75],[84,92,64,77,"message"],[84,99,64,84],[84,100,64,85],[84,104,65,8],[84,107,65,11,"res"],[84,110,65,14],[84,111,65,15,"status"],[84,117,65,21],[84,121,65,25,"res"],[84,124,65,28],[84,125,65,29,"statusText"],[84,135,65,39],[84,139,65,43],[84,155,65,59],[84,157,65,61],[85,10,66,6],[85,14,66,12,"err"],[85,17,66,15],[85,20,66,18],[85,24,66,22,"Error"],[85,29,66,27],[85,30,66,28,"message"],[85,37,66,35],[85,38,66,36],[86,10,67,6],[87,10,68,6],[88,10,69,6,"err"],[88,13,69,9],[88,14,69,10,"status"],[88,20,69,16],[88,23,69,19,"res"],[88,26,69,22],[88,27,69,23,"status"],[88,33,69,29],[89,10,70,6],[90,10,71,6,"err"],[90,13,71,9],[90,14,71,10,"data"],[90,18,71,14],[90,21,71,17,"data"],[90,25,71,21],[91,10,72,6],[91,16,72,12,"err"],[91,19,72,15],[92,8,73,4],[93,8,74,4],[93,15,74,11,"data"],[93,19,74,15],[94,6,75,2],[94,7,75,3],[94,8,75,4],[94,15,75,11,"err"],[94,18,75,14],[94,20,75,16],[95,8,76,4],[96,8,77,4],[96,12,77,8,"err"],[96,15,77,11],[96,27,77,23,"TypeError"],[96,36,77,32],[96,40,77,36],[96,65,77,61],[96,66,77,62,"test"],[96,70,77,66],[96,71,77,67,"err"],[96,74,77,70],[96,75,77,71,"message"],[96,82,77,78],[96,83,77,79],[96,85,77,81],[97,10,78,6],[97,14,78,12,"e"],[97,15,78,13],[97,18,78,16],[97,22,78,20,"Error"],[97,27,78,25],[97,28,78,26],[97,52,78,50],[97,53,78,51],[98,10,79,6],[99,10,80,6,"e"],[99,11,80,7],[99,12,80,8,"code"],[99,16,80,12],[99,19,80,15],[99,34,80,30],[100,10,81,6],[100,16,81,12,"e"],[100,17,81,13],[101,8,82,4],[102,8,83,4],[102,14,83,10,"err"],[102,17,83,13],[103,6,84,2],[104,4,85,0],[104,5,85,1],[105,4,85,1],[105,11,85,1,"_apiFetchJson"],[105,24,85,1],[105,25,85,1,"apply"],[105,30,85,1],[105,37,85,1,"arguments"],[105,46,85,1],[106,2,85,1],[107,2,85,1],[107,6,85,1,"_default"],[107,14,85,1],[107,17,85,1,"exports"],[107,24,85,1],[107,25,85,1,"default"],[107,32,85,1],[107,35,87,15,"apiFetch"],[107,43,87,23],[108,0,87,23],[108,3]],"functionMap":{"names":["<global>","toApiUrl","apiFetch","apiFetchJson"],"mappings":"AAA;wBCQ;CDK;OEM;CF6B;OGG;CHiC"}},"type":"js/module"}]}