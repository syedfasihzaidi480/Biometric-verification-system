{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"]}},{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"]}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":40,"index":40}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.API_BASE = void 0;\n  exports.apiFetch = apiFetch;\n  exports.apiFetchJson = apiFetchJson;\n  exports.toApiUrl = exports.default = void 0;\n  var _asyncToGenerator2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/asyncToGenerator\"));\n  var _env2 = require(_dependencyMap[2], \"expo/virtual/env\");\n  var _reactNative = require(_dependencyMap[3], \"react-native\");\n  // Compute API base URL for mobile (Expo) environments\n  // Prefer EXPO_PUBLIC_API_URL; otherwise use sensible localhost defaults per platform\n  var API_BASE = exports.API_BASE = _env2.env.EXPO_PUBLIC_API_URL && _env2.env.EXPO_PUBLIC_API_URL.replace(/\\/$/, '') || (_reactNative.Platform.OS === 'android' ? 'http://10.0.2.2:4000' : 'http://localhost:4000');\n\n  // Helper to build absolute URL from a path or pass-through absolute URLs\n  var toApiUrl = path => {\n    if (!path) return API_BASE;\n    if (/^https?:\\/\\//i.test(path)) return path;\n    var normalizedPath = path.startsWith('/') ? path : `/${path}`;\n    return `${API_BASE}${normalizedPath}`;\n  };\n\n  // Smart fetch wrapper for API calls from React Native\n  // - Prefixes API_BASE\n  // - Sets JSON headers/body when a plain object is provided\n  // - Avoids setting Content-Type for FormData (let RN set boundaries)\n  exports.toApiUrl = toApiUrl;\n  function apiFetch(_x) {\n    return _apiFetch.apply(this, arguments);\n  } // Convenience to fetch JSON with basic error surface\n  function _apiFetch() {\n    _apiFetch = (0, _asyncToGenerator2.default)(function* (path) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var url = toApiUrl(path);\n      var opts = {\n        ...options\n      };\n\n      // Normalize headers\n      var headers = {\n        ...(opts.headers || {})\n      };\n\n      // If body is a plain object, JSON-encode it\n      var isPlainObject = opts.body && typeof opts.body === 'object' && !(opts.body instanceof FormData);\n      if (isPlainObject) {\n        headers['Content-Type'] = headers['Content-Type'] || 'application/json';\n        opts.body = JSON.stringify(opts.body);\n      }\n\n      // If body is FormData, ensure we don't manually set Content-Type\n      if (opts.body instanceof FormData) {\n        // React Native will set the correct multipart boundary automatically\n        if ('Content-Type' in headers) delete headers['Content-Type'];\n      }\n      opts.headers = headers;\n      var res = yield fetch(url, opts);\n      return res;\n    });\n    return _apiFetch.apply(this, arguments);\n  }\n  function apiFetchJson(_x2) {\n    return _apiFetchJson.apply(this, arguments);\n  }\n  function _apiFetchJson() {\n    _apiFetchJson = (0, _asyncToGenerator2.default)(function* (path) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var res = yield apiFetch(path, options);\n      var data = null;\n      try {\n        data = yield res.json();\n      } catch (e) {\n        // no-op; leave data as null if not JSON\n      }\n      if (!res.ok && data?.error) {\n        throw new Error(typeof data.error === 'string' ? data.error : data.error.message || 'Request failed');\n      }\n      return data;\n    });\n    return _apiFetchJson.apply(this, arguments);\n  }\n  var _default = exports.default = apiFetch;\n});","lineCount":85,"map":[[12,2,1,0],[12,6,1,0,"_reactNative"],[12,18,1,0],[12,21,1,0,"require"],[12,28,1,0],[12,29,1,0,"_dependencyMap"],[12,43,1,0],[13,2,3,0],[14,2,4,0],[15,2,5,7],[15,6,5,13,"API_BASE"],[15,14,5,21],[15,17,5,21,"exports"],[15,24,5,21],[15,25,5,21,"API_BASE"],[15,33,5,21],[15,36,5,25,"_env2"],[15,41,5,25],[15,42,5,25,"env"],[15,45,5,25],[15,46,5,25,"EXPO_PUBLIC_API_URL"],[15,65,5,25],[15,69,5,60,"_env2"],[15,74,5,60],[15,75,5,60,"env"],[15,78,5,60],[15,79,5,60,"EXPO_PUBLIC_API_URL"],[15,98,5,60],[15,99,5,92,"replace"],[15,106,5,99],[15,107,5,100],[15,112,5,105],[15,114,5,107],[15,116,5,109],[15,117,5,110],[15,122,6,6,"Platform"],[15,143,6,14],[15,144,6,15,"OS"],[15,146,6,17],[15,151,6,22],[15,160,6,31],[15,163,6,34],[15,185,6,56],[15,188,6,59],[15,211,6,82],[15,212,6,83],[17,2,8,0],[18,2,9,7],[18,6,9,13,"toApiUrl"],[18,14,9,21],[18,17,9,25,"path"],[18,21,9,29],[18,25,9,34],[19,4,10,2],[19,8,10,6],[19,9,10,7,"path"],[19,13,10,11],[19,15,10,13],[19,22,10,20,"API_BASE"],[19,30,10,28],[20,4,11,2],[20,8,11,6],[20,23,11,21],[20,24,11,22,"test"],[20,28,11,26],[20,29,11,27,"path"],[20,33,11,31],[20,34,11,32],[20,36,11,34],[20,43,11,41,"path"],[20,47,11,45],[21,4,12,2],[21,8,12,8,"normalizedPath"],[21,22,12,22],[21,25,12,25,"path"],[21,29,12,29],[21,30,12,30,"startsWith"],[21,40,12,40],[21,41,12,41],[21,44,12,44],[21,45,12,45],[21,48,12,48,"path"],[21,52,12,52],[21,55,12,55],[21,59,12,59,"path"],[21,63,12,63],[21,65,12,65],[22,4,13,2],[22,11,13,9],[22,14,13,12,"API_BASE"],[22,22,13,20],[22,25,13,23,"normalizedPath"],[22,39,13,37],[22,41,13,39],[23,2,14,0],[23,3,14,1],[25,2,16,0],[26,2,17,0],[27,2,18,0],[28,2,19,0],[29,2,19,0,"exports"],[29,9,19,0],[29,10,19,0,"toApiUrl"],[29,18,19,0],[29,21,19,0,"toApiUrl"],[29,29,19,0],[30,2,19,0],[30,11,20,22,"apiFetch"],[30,19,20,30,"apiFetch"],[30,20,20,30,"_x"],[30,22,20,30],[31,4,20,30],[31,11,20,30,"_apiFetch"],[31,20,20,30],[31,21,20,30,"apply"],[31,26,20,30],[31,33,20,30,"arguments"],[31,42,20,30],[32,2,20,30],[32,4,46,0],[33,2,46,0],[33,11,46,0,"_apiFetch"],[33,21,46,0],[34,4,46,0,"_apiFetch"],[34,13,46,0],[34,20,46,0,"_asyncToGenerator2"],[34,38,46,0],[34,39,46,0,"default"],[34,46,46,0],[34,48,20,7],[34,59,20,31,"path"],[34,63,20,35],[34,65,20,51],[35,6,20,51],[35,10,20,37,"options"],[35,17,20,44],[35,20,20,44,"arguments"],[35,29,20,44],[35,30,20,44,"length"],[35,36,20,44],[35,44,20,44,"arguments"],[35,53,20,44],[35,61,20,44,"undefined"],[35,70,20,44],[35,73,20,44,"arguments"],[35,82,20,44],[35,88,20,47],[35,89,20,48],[35,90,20,49],[36,6,21,2],[36,10,21,8,"url"],[36,13,21,11],[36,16,21,14,"toApiUrl"],[36,24,21,22],[36,25,21,23,"path"],[36,29,21,27],[36,30,21,28],[37,6,22,2],[37,10,22,8,"opts"],[37,14,22,12],[37,17,22,15],[38,8,22,17],[38,11,22,20,"options"],[39,6,22,28],[39,7,22,29],[41,6,24,2],[42,6,25,2],[42,10,25,8,"headers"],[42,17,25,15],[42,20,25,18],[43,8,25,20],[43,12,25,24,"opts"],[43,16,25,28],[43,17,25,29,"headers"],[43,24,25,36],[43,28,25,40],[43,29,25,41],[43,30,25,42],[44,6,25,44],[44,7,25,45],[46,6,27,2],[47,6,28,2],[47,10,28,8,"isPlainObject"],[47,23,28,21],[47,26,28,24,"opts"],[47,30,28,28],[47,31,28,29,"body"],[47,35,28,33],[47,39,28,37],[47,46,28,44,"opts"],[47,50,28,48],[47,51,28,49,"body"],[47,55,28,53],[47,60,28,58],[47,68,28,66],[47,72,28,70],[47,74,28,72,"opts"],[47,78,28,76],[47,79,28,77,"body"],[47,83,28,81],[47,95,28,93,"FormData"],[47,103,28,101],[47,104,28,102],[48,6,29,2],[48,10,29,6,"isPlainObject"],[48,23,29,19],[48,25,29,21],[49,8,30,4,"headers"],[49,15,30,11],[49,16,30,12],[49,30,30,26],[49,31,30,27],[49,34,30,30,"headers"],[49,41,30,37],[49,42,30,38],[49,56,30,52],[49,57,30,53],[49,61,30,57],[49,79,30,75],[50,8,31,4,"opts"],[50,12,31,8],[50,13,31,9,"body"],[50,17,31,13],[50,20,31,16,"JSON"],[50,24,31,20],[50,25,31,21,"stringify"],[50,34,31,30],[50,35,31,31,"opts"],[50,39,31,35],[50,40,31,36,"body"],[50,44,31,40],[50,45,31,41],[51,6,32,2],[53,6,34,2],[54,6,35,2],[54,10,35,6,"opts"],[54,14,35,10],[54,15,35,11,"body"],[54,19,35,15],[54,31,35,27,"FormData"],[54,39,35,35],[54,41,35,37],[55,8,36,4],[56,8,37,4],[56,12,37,8],[56,26,37,22],[56,30,37,26,"headers"],[56,37,37,33],[56,39,37,35],[56,46,37,42,"headers"],[56,53,37,49],[56,54,37,50],[56,68,37,64],[56,69,37,65],[57,6,38,2],[58,6,40,2,"opts"],[58,10,40,6],[58,11,40,7,"headers"],[58,18,40,14],[58,21,40,17,"headers"],[58,28,40,24],[59,6,42,2],[59,10,42,8,"res"],[59,13,42,11],[59,22,42,20,"fetch"],[59,27,42,25],[59,28,42,26,"url"],[59,31,42,29],[59,33,42,31,"opts"],[59,37,42,35],[59,38,42,36],[60,6,43,2],[60,13,43,9,"res"],[60,16,43,12],[61,4,44,0],[61,5,44,1],[62,4,44,1],[62,11,44,1,"_apiFetch"],[62,20,44,1],[62,21,44,1,"apply"],[62,26,44,1],[62,33,44,1,"arguments"],[62,42,44,1],[63,2,44,1],[64,2,44,1],[64,11,47,22,"apiFetchJson"],[64,23,47,34,"apiFetchJson"],[64,24,47,34,"_x2"],[64,27,47,34],[65,4,47,34],[65,11,47,34,"_apiFetchJson"],[65,24,47,34],[65,25,47,34,"apply"],[65,30,47,34],[65,37,47,34,"arguments"],[65,46,47,34],[66,2,47,34],[67,2,47,34],[67,11,47,34,"_apiFetchJson"],[67,25,47,34],[68,4,47,34,"_apiFetchJson"],[68,17,47,34],[68,24,47,34,"_asyncToGenerator2"],[68,42,47,34],[68,43,47,34,"default"],[68,50,47,34],[68,52,47,7],[68,63,47,35,"path"],[68,67,47,39],[68,69,47,55],[69,6,47,55],[69,10,47,41,"options"],[69,17,47,48],[69,20,47,48,"arguments"],[69,29,47,48],[69,30,47,48,"length"],[69,36,47,48],[69,44,47,48,"arguments"],[69,53,47,48],[69,61,47,48,"undefined"],[69,70,47,48],[69,73,47,48,"arguments"],[69,82,47,48],[69,88,47,51],[69,89,47,52],[69,90,47,53],[70,6,48,2],[70,10,48,8,"res"],[70,13,48,11],[70,22,48,20,"apiFetch"],[70,30,48,28],[70,31,48,29,"path"],[70,35,48,33],[70,37,48,35,"options"],[70,44,48,42],[70,45,48,43],[71,6,49,2],[71,10,49,6,"data"],[71,14,49,10],[71,17,49,13],[71,21,49,17],[72,6,50,2],[72,10,50,6],[73,8,51,4,"data"],[73,12,51,8],[73,21,51,17,"res"],[73,24,51,20],[73,25,51,21,"json"],[73,29,51,25],[73,30,51,26],[73,31,51,27],[74,6,52,2],[74,7,52,3],[74,8,52,4],[74,15,52,11,"e"],[74,16,52,12],[74,18,52,14],[75,8,53,4],[76,6,53,4],[77,6,55,2],[77,10,55,6],[77,11,55,7,"res"],[77,14,55,10],[77,15,55,11,"ok"],[77,17,55,13],[77,21,55,17,"data"],[77,25,55,21],[77,27,55,23,"error"],[77,32,55,28],[77,34,55,30],[78,8,56,4],[78,14,56,10],[78,18,56,14,"Error"],[78,23,56,19],[78,24,56,20],[78,31,56,27,"data"],[78,35,56,31],[78,36,56,32,"error"],[78,41,56,37],[78,46,56,42],[78,54,56,50],[78,57,56,53,"data"],[78,61,56,57],[78,62,56,58,"error"],[78,67,56,63],[78,70,56,67,"data"],[78,74,56,71],[78,75,56,72,"error"],[78,80,56,77],[78,81,56,78,"message"],[78,88,56,85],[78,92,56,89],[78,108,56,106],[78,109,56,107],[79,6,57,2],[80,6,58,2],[80,13,58,9,"data"],[80,17,58,13],[81,4,59,0],[81,5,59,1],[82,4,59,1],[82,11,59,1,"_apiFetchJson"],[82,24,59,1],[82,25,59,1,"apply"],[82,30,59,1],[82,37,59,1,"arguments"],[82,46,59,1],[83,2,59,1],[84,2,59,1],[84,6,59,1,"_default"],[84,14,59,1],[84,17,59,1,"exports"],[84,24,59,1],[84,25,59,1,"default"],[84,32,59,1],[84,35,61,15,"apiFetch"],[84,43,61,23],[85,0,61,23],[85,3]],"functionMap":{"names":["<global>","toApiUrl","apiFetch","apiFetchJson"],"mappings":"AAA;wBCQ;CDK;OEM;CFwB;OGG;CHY"}},"type":"js/module"}]}