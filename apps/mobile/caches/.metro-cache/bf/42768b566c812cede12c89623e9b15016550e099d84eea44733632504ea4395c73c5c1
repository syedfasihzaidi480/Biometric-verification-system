{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"]}},{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"]}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":40,"index":40}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.API_BASE = void 0;\n  exports.apiFetch = apiFetch;\n  exports.apiFetchJson = apiFetchJson;\n  exports.toApiUrl = exports.default = void 0;\n  var _asyncToGenerator2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/asyncToGenerator\"));\n  var _env2 = require(_dependencyMap[2], \"expo/virtual/env\");\n  var _reactNative = require(_dependencyMap[3], \"react-native\");\n  // Compute API base URL for mobile (Expo) environments\n  // Prefer EXPO_PUBLIC_API_URL; support legacy EXPO_PUBLIC_BASE_URL; else use sensible localhost defaults\n  var ENV_API = (_env2.env.EXPO_PUBLIC_API_URL || _env2.env.EXPO_PUBLIC_BASE_URL || '').replace(/\\/$/, '');\n  var API_BASE = exports.API_BASE = ENV_API || (_reactNative.Platform.OS === 'android' ? 'http://10.0.2.2:4000' : 'http://localhost:4000');\n\n  // Helper to build absolute URL from a path or pass-through absolute URLs\n  var toApiUrl = path => {\n    if (!path) return API_BASE;\n    if (/^https?:\\/\\//i.test(path)) return path;\n    var normalizedPath = path.startsWith('/') ? path : `/${path}`;\n    return `${API_BASE}${normalizedPath}`;\n  };\n\n  // Smart fetch wrapper for API calls from React Native\n  // - Prefixes API_BASE\n  // - Sets JSON headers/body when a plain object is provided\n  // - Avoids setting Content-Type for FormData (let RN set boundaries)\n  exports.toApiUrl = toApiUrl;\n  function apiFetch(_x) {\n    return _apiFetch.apply(this, arguments);\n  } // Convenience to fetch JSON with basic error surface\n  function _apiFetch() {\n    _apiFetch = (0, _asyncToGenerator2.default)(function* (path) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var url = toApiUrl(path);\n      var opts = {\n        ...options\n      };\n\n      // Normalize headers\n      var headers = {\n        ...(opts.headers || {})\n      };\n\n      // Ensure cookies are included so API sessions stay intact\n      if (typeof opts.credentials === 'undefined') {\n        opts.credentials = 'include';\n      }\n\n      // If body is a plain object, JSON-encode it\n      var isPlainObject = opts.body && typeof opts.body === 'object' && !(opts.body instanceof FormData);\n      if (isPlainObject) {\n        headers['Content-Type'] = headers['Content-Type'] || 'application/json';\n        opts.body = JSON.stringify(opts.body);\n      }\n\n      // If body is FormData, ensure we don't manually set Content-Type\n      if (opts.body instanceof FormData) {\n        // React Native will set the correct multipart boundary automatically\n        if ('Content-Type' in headers) delete headers['Content-Type'];\n      }\n      opts.headers = headers;\n      try {\n        var res = yield fetch(url, opts);\n        return res;\n      } catch (e) {\n        console.warn('[apiFetch] Network error', {\n          url,\n          method: opts.method || 'GET',\n          message: e?.message\n        });\n        throw e;\n      }\n    });\n    return _apiFetch.apply(this, arguments);\n  }\n  function apiFetchJson(_x2) {\n    return _apiFetchJson.apply(this, arguments);\n  }\n  function _apiFetchJson() {\n    _apiFetchJson = (0, _asyncToGenerator2.default)(function* (path) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      try {\n        var res = yield apiFetch(path, options);\n        var data = null;\n        try {\n          data = yield res.json();\n        } catch (e) {\n          // Response might not be JSON; that's okay\n        }\n        if (!res.ok) {\n          var message = data && (typeof data.error === 'string' ? data.error : data?.error?.message) || `${res.status} ${res.statusText || 'Request failed'}`;\n          var err = new Error(message);\n          // attach a few useful fields for the UI\n          // @ts-ignore\n          err.status = res.status;\n          // @ts-ignore\n          err.data = data;\n          throw err;\n        }\n        return data;\n      } catch (err) {\n        // Normalize common RN network error\n        if (err instanceof TypeError && /network request failed/i.test(err.message)) {\n          var e = new Error('Network request failed');\n          // @ts-ignore\n          e.code = 'NETWORK_ERROR';\n          throw e;\n        }\n        throw err;\n      }\n    });\n    return _apiFetchJson.apply(this, arguments);\n  }\n  var _default = exports.default = apiFetch;\n});","lineCount":118,"map":[[12,2,1,0],[12,6,1,0,"_reactNative"],[12,18,1,0],[12,21,1,0,"require"],[12,28,1,0],[12,29,1,0,"_dependencyMap"],[12,43,1,0],[13,2,3,0],[14,2,4,0],[15,2,5,0],[15,6,5,6,"ENV_API"],[15,13,5,13],[15,16,5,16],[15,17,5,17,"_env2"],[15,22,5,17],[15,23,5,17,"env"],[15,26,5,17],[15,27,5,17,"EXPO_PUBLIC_API_URL"],[15,46,5,17],[15,50,5,17,"_env2"],[15,55,5,17],[15,56,5,17,"env"],[15,59,5,17],[15,60,5,17,"EXPO_PUBLIC_BASE_URL"],[15,80,5,84],[15,84,5,88],[15,86,5,90],[15,88,5,92,"replace"],[15,95,5,99],[15,96,5,100],[15,101,5,105],[15,103,5,107],[15,105,5,109],[15,106,5,110],[16,2,6,7],[16,6,6,13,"API_BASE"],[16,14,6,21],[16,17,6,21,"exports"],[16,24,6,21],[16,25,6,21,"API_BASE"],[16,33,6,21],[16,36,6,24,"ENV_API"],[16,43,6,31],[16,48,6,36,"Platform"],[16,69,6,44],[16,70,6,45,"OS"],[16,72,6,47],[16,77,6,52],[16,86,6,61],[16,89,6,64],[16,111,6,86],[16,114,6,89],[16,137,6,112],[16,138,6,113],[18,2,8,0],[19,2,9,7],[19,6,9,13,"toApiUrl"],[19,14,9,21],[19,17,9,25,"path"],[19,21,9,29],[19,25,9,34],[20,4,10,2],[20,8,10,6],[20,9,10,7,"path"],[20,13,10,11],[20,15,10,13],[20,22,10,20,"API_BASE"],[20,30,10,28],[21,4,11,2],[21,8,11,6],[21,23,11,21],[21,24,11,22,"test"],[21,28,11,26],[21,29,11,27,"path"],[21,33,11,31],[21,34,11,32],[21,36,11,34],[21,43,11,41,"path"],[21,47,11,45],[22,4,12,2],[22,8,12,8,"normalizedPath"],[22,22,12,22],[22,25,12,25,"path"],[22,29,12,29],[22,30,12,30,"startsWith"],[22,40,12,40],[22,41,12,41],[22,44,12,44],[22,45,12,45],[22,48,12,48,"path"],[22,52,12,52],[22,55,12,55],[22,59,12,59,"path"],[22,63,12,63],[22,65,12,65],[23,4,13,2],[23,11,13,9],[23,14,13,12,"API_BASE"],[23,22,13,20],[23,25,13,23,"normalizedPath"],[23,39,13,37],[23,41,13,39],[24,2,14,0],[24,3,14,1],[26,2,16,0],[27,2,17,0],[28,2,18,0],[29,2,19,0],[30,2,19,0,"exports"],[30,9,19,0],[30,10,19,0,"toApiUrl"],[30,18,19,0],[30,21,19,0,"toApiUrl"],[30,29,19,0],[31,2,19,0],[31,11,20,22,"apiFetch"],[31,19,20,30,"apiFetch"],[31,20,20,30,"_x"],[31,22,20,30],[32,4,20,30],[32,11,20,30,"_apiFetch"],[32,20,20,30],[32,21,20,30,"apply"],[32,26,20,30],[32,33,20,30,"arguments"],[32,42,20,30],[33,2,20,30],[33,4,56,0],[34,2,56,0],[34,11,56,0,"_apiFetch"],[34,21,56,0],[35,4,56,0,"_apiFetch"],[35,13,56,0],[35,20,56,0,"_asyncToGenerator2"],[35,38,56,0],[35,39,56,0,"default"],[35,46,56,0],[35,48,20,7],[35,59,20,31,"path"],[35,63,20,35],[35,65,20,51],[36,6,20,51],[36,10,20,37,"options"],[36,17,20,44],[36,20,20,44,"arguments"],[36,29,20,44],[36,30,20,44,"length"],[36,36,20,44],[36,44,20,44,"arguments"],[36,53,20,44],[36,61,20,44,"undefined"],[36,70,20,44],[36,73,20,44,"arguments"],[36,82,20,44],[36,88,20,47],[36,89,20,48],[36,90,20,49],[37,6,21,2],[37,10,21,8,"url"],[37,13,21,11],[37,16,21,14,"toApiUrl"],[37,24,21,22],[37,25,21,23,"path"],[37,29,21,27],[37,30,21,28],[38,6,22,2],[38,10,22,8,"opts"],[38,14,22,12],[38,17,22,15],[39,8,22,17],[39,11,22,20,"options"],[40,6,22,28],[40,7,22,29],[42,6,24,2],[43,6,25,2],[43,10,25,8,"headers"],[43,17,25,15],[43,20,25,18],[44,8,25,20],[44,12,25,24,"opts"],[44,16,25,28],[44,17,25,29,"headers"],[44,24,25,36],[44,28,25,40],[44,29,25,41],[44,30,25,42],[45,6,25,44],[45,7,25,45],[47,6,27,2],[48,6,28,2],[48,10,28,6],[48,17,28,13,"opts"],[48,21,28,17],[48,22,28,18,"credentials"],[48,33,28,29],[48,38,28,34],[48,49,28,45],[48,51,28,47],[49,8,29,4,"opts"],[49,12,29,8],[49,13,29,9,"credentials"],[49,24,29,20],[49,27,29,23],[49,36,29,32],[50,6,30,2],[52,6,32,2],[53,6,33,2],[53,10,33,8,"isPlainObject"],[53,23,33,21],[53,26,33,24,"opts"],[53,30,33,28],[53,31,33,29,"body"],[53,35,33,33],[53,39,33,37],[53,46,33,44,"opts"],[53,50,33,48],[53,51,33,49,"body"],[53,55,33,53],[53,60,33,58],[53,68,33,66],[53,72,33,70],[53,74,33,72,"opts"],[53,78,33,76],[53,79,33,77,"body"],[53,83,33,81],[53,95,33,93,"FormData"],[53,103,33,101],[53,104,33,102],[54,6,34,2],[54,10,34,6,"isPlainObject"],[54,23,34,19],[54,25,34,21],[55,8,35,4,"headers"],[55,15,35,11],[55,16,35,12],[55,30,35,26],[55,31,35,27],[55,34,35,30,"headers"],[55,41,35,37],[55,42,35,38],[55,56,35,52],[55,57,35,53],[55,61,35,57],[55,79,35,75],[56,8,36,4,"opts"],[56,12,36,8],[56,13,36,9,"body"],[56,17,36,13],[56,20,36,16,"JSON"],[56,24,36,20],[56,25,36,21,"stringify"],[56,34,36,30],[56,35,36,31,"opts"],[56,39,36,35],[56,40,36,36,"body"],[56,44,36,40],[56,45,36,41],[57,6,37,2],[59,6,39,2],[60,6,40,2],[60,10,40,6,"opts"],[60,14,40,10],[60,15,40,11,"body"],[60,19,40,15],[60,31,40,27,"FormData"],[60,39,40,35],[60,41,40,37],[61,8,41,4],[62,8,42,4],[62,12,42,8],[62,26,42,22],[62,30,42,26,"headers"],[62,37,42,33],[62,39,42,35],[62,46,42,42,"headers"],[62,53,42,49],[62,54,42,50],[62,68,42,64],[62,69,42,65],[63,6,43,2],[64,6,45,2,"opts"],[64,10,45,6],[64,11,45,7,"headers"],[64,18,45,14],[64,21,45,17,"headers"],[64,28,45,24],[65,6,47,2],[65,10,47,6],[66,8,48,4],[66,12,48,10,"res"],[66,15,48,13],[66,24,48,22,"fetch"],[66,29,48,27],[66,30,48,28,"url"],[66,33,48,31],[66,35,48,33,"opts"],[66,39,48,37],[66,40,48,38],[67,8,49,4],[67,15,49,11,"res"],[67,18,49,14],[68,6,50,2],[68,7,50,3],[68,8,50,4],[68,15,50,11,"e"],[68,16,50,12],[68,18,50,14],[69,8,51,4,"console"],[69,15,51,11],[69,16,51,12,"warn"],[69,20,51,16],[69,21,51,17],[69,47,51,43],[69,49,51,45],[70,10,51,47,"url"],[70,13,51,50],[71,10,51,52,"method"],[71,16,51,58],[71,18,51,60,"opts"],[71,22,51,64],[71,23,51,65,"method"],[71,29,51,71],[71,33,51,75],[71,38,51,80],[72,10,51,82,"message"],[72,17,51,89],[72,19,51,91,"e"],[72,20,51,92],[72,22,51,94,"message"],[73,8,51,102],[73,9,51,103],[73,10,51,104],[74,8,52,4],[74,14,52,10,"e"],[74,15,52,11],[75,6,53,2],[76,4,54,0],[76,5,54,1],[77,4,54,1],[77,11,54,1,"_apiFetch"],[77,20,54,1],[77,21,54,1,"apply"],[77,26,54,1],[77,33,54,1,"arguments"],[77,42,54,1],[78,2,54,1],[79,2,54,1],[79,11,57,22,"apiFetchJson"],[79,23,57,34,"apiFetchJson"],[79,24,57,34,"_x2"],[79,27,57,34],[80,4,57,34],[80,11,57,34,"_apiFetchJson"],[80,24,57,34],[80,25,57,34,"apply"],[80,30,57,34],[80,37,57,34,"arguments"],[80,46,57,34],[81,2,57,34],[82,2,57,34],[82,11,57,34,"_apiFetchJson"],[82,25,57,34],[83,4,57,34,"_apiFetchJson"],[83,17,57,34],[83,24,57,34,"_asyncToGenerator2"],[83,42,57,34],[83,43,57,34,"default"],[83,50,57,34],[83,52,57,7],[83,63,57,35,"path"],[83,67,57,39],[83,69,57,55],[84,6,57,55],[84,10,57,41,"options"],[84,17,57,48],[84,20,57,48,"arguments"],[84,29,57,48],[84,30,57,48,"length"],[84,36,57,48],[84,44,57,48,"arguments"],[84,53,57,48],[84,61,57,48,"undefined"],[84,70,57,48],[84,73,57,48,"arguments"],[84,82,57,48],[84,88,57,51],[84,89,57,52],[84,90,57,53],[85,6,58,2],[85,10,58,6],[86,8,59,4],[86,12,59,10,"res"],[86,15,59,13],[86,24,59,22,"apiFetch"],[86,32,59,30],[86,33,59,31,"path"],[86,37,59,35],[86,39,59,37,"options"],[86,46,59,44],[86,47,59,45],[87,8,60,4],[87,12,60,8,"data"],[87,16,60,12],[87,19,60,15],[87,23,60,19],[88,8,61,4],[88,12,61,8],[89,10,62,6,"data"],[89,14,62,10],[89,23,62,19,"res"],[89,26,62,22],[89,27,62,23,"json"],[89,31,62,27],[89,32,62,28],[89,33,62,29],[90,8,63,4],[90,9,63,5],[90,10,63,6],[90,17,63,13,"e"],[90,18,63,14],[90,20,63,16],[91,10,64,6],[92,8,64,6],[93,8,67,4],[93,12,67,8],[93,13,67,9,"res"],[93,16,67,12],[93,17,67,13,"ok"],[93,19,67,15],[93,21,67,17],[94,10,68,6],[94,14,68,12,"message"],[94,21,68,19],[94,24,69,9,"data"],[94,28,69,13],[94,33,69,18],[94,40,69,25,"data"],[94,44,69,29],[94,45,69,30,"error"],[94,50,69,35],[94,55,69,40],[94,63,69,48],[94,66,69,51,"data"],[94,70,69,55],[94,71,69,56,"error"],[94,76,69,61],[94,79,69,64,"data"],[94,83,69,68],[94,85,69,70,"error"],[94,90,69,75],[94,92,69,77,"message"],[94,99,69,84],[94,100,69,85],[94,104,70,8],[94,107,70,11,"res"],[94,110,70,14],[94,111,70,15,"status"],[94,117,70,21],[94,121,70,25,"res"],[94,124,70,28],[94,125,70,29,"statusText"],[94,135,70,39],[94,139,70,43],[94,155,70,59],[94,157,70,61],[95,10,71,6],[95,14,71,12,"err"],[95,17,71,15],[95,20,71,18],[95,24,71,22,"Error"],[95,29,71,27],[95,30,71,28,"message"],[95,37,71,35],[95,38,71,36],[96,10,72,6],[97,10,73,6],[98,10,74,6,"err"],[98,13,74,9],[98,14,74,10,"status"],[98,20,74,16],[98,23,74,19,"res"],[98,26,74,22],[98,27,74,23,"status"],[98,33,74,29],[99,10,75,6],[100,10,76,6,"err"],[100,13,76,9],[100,14,76,10,"data"],[100,18,76,14],[100,21,76,17,"data"],[100,25,76,21],[101,10,77,6],[101,16,77,12,"err"],[101,19,77,15],[102,8,78,4],[103,8,79,4],[103,15,79,11,"data"],[103,19,79,15],[104,6,80,2],[104,7,80,3],[104,8,80,4],[104,15,80,11,"err"],[104,18,80,14],[104,20,80,16],[105,8,81,4],[106,8,82,4],[106,12,82,8,"err"],[106,15,82,11],[106,27,82,23,"TypeError"],[106,36,82,32],[106,40,82,36],[106,65,82,61],[106,66,82,62,"test"],[106,70,82,66],[106,71,82,67,"err"],[106,74,82,70],[106,75,82,71,"message"],[106,82,82,78],[106,83,82,79],[106,85,82,81],[107,10,83,6],[107,14,83,12,"e"],[107,15,83,13],[107,18,83,16],[107,22,83,20,"Error"],[107,27,83,25],[107,28,83,26],[107,52,83,50],[107,53,83,51],[108,10,84,6],[109,10,85,6,"e"],[109,11,85,7],[109,12,85,8,"code"],[109,16,85,12],[109,19,85,15],[109,34,85,30],[110,10,86,6],[110,16,86,12,"e"],[110,17,86,13],[111,8,87,4],[112,8,88,4],[112,14,88,10,"err"],[112,17,88,13],[113,6,89,2],[114,4,90,0],[114,5,90,1],[115,4,90,1],[115,11,90,1,"_apiFetchJson"],[115,24,90,1],[115,25,90,1,"apply"],[115,30,90,1],[115,37,90,1,"arguments"],[115,46,90,1],[116,2,90,1],[117,2,90,1],[117,6,90,1,"_default"],[117,14,90,1],[117,17,90,1,"exports"],[117,24,90,1],[117,25,90,1,"default"],[117,32,90,1],[117,35,92,15,"apiFetch"],[117,43,92,23],[118,0,92,23],[118,3]],"functionMap":{"names":["<global>","toApiUrl","apiFetch","apiFetchJson"],"mappings":"AAA;wBCQ;CDK;OEM;CFkC;OGG;CHiC"}},"type":"js/module"}]}