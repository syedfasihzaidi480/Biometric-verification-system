{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"]}},{"name":"@/utils/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":63,"index":63}}],"key":"dzXjryHTvdSCDFGj8HDj8YCDHm4=","exportNames":["*"]}},{"name":"./store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":65},"end":{"line":2,"column":39,"index":104}}],"key":"5APpJpQn7z9vMHIr4H9Bv6aaMsY=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n  exports.signInWithCredentials = signInWithCredentials;\n  var _asyncToGenerator2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/asyncToGenerator\"));\n  var _api = require(_dependencyMap[2], \"@/utils/api\");\n  var _store = require(_dependencyMap[3], \"./store\");\n  // Programmatic credentials sign-in for mobile clients\n  // 1) POST to /api/auth/callback/credentials with form-encoded body\n  // 2) Fetch /api/auth/session to retrieve the session payload\n  // 3) Persist session in auth store (SecureStore)\n  function signInWithCredentials(_x) {\n    return _signInWithCredentials.apply(this, arguments);\n  }\n  function _signInWithCredentials() {\n    _signInWithCredentials = (0, _asyncToGenerator2.default)(function* (_ref) {\n      var email = _ref.email,\n        password = _ref.password,\n        _ref$callbackUrl = _ref.callbackUrl,\n        callbackUrl = _ref$callbackUrl === void 0 ? '/' : _ref$callbackUrl;\n      var body = new URLSearchParams();\n      body.set('email', email);\n      body.set('password', password);\n      // Provide a callbackUrl so Auth.js has a target (even if we don't follow it here)\n      if (callbackUrl) body.set('callbackUrl', callbackUrl);\n\n      // Auth.js may respond with a redirect; RN fetch will still apply Set-Cookie\n      yield (0, _api.apiFetch)('/api/auth/callback/credentials', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body: body.toString()\n      });\n\n      // Now retrieve the session JSON\n      var session = yield (0, _api.apiFetchJson)('/api/auth/session', {\n        method: 'GET'\n      });\n      if (session && (session.user || session?.expires)) {\n        // Store in auth store for app UI\n        _store.useAuthStore.getState().setAuth(session);\n        return {\n          ok: true,\n          session\n        };\n      }\n      return {\n        ok: false,\n        error: 'No session returned'\n      };\n    });\n    return _signInWithCredentials.apply(this, arguments);\n  }\n  var _default = exports.default = signInWithCredentials;\n});","lineCount":59,"map":[[9,2,1,0],[9,6,1,0,"_api"],[9,10,1,0],[9,13,1,0,"require"],[9,20,1,0],[9,21,1,0,"_dependencyMap"],[9,35,1,0],[10,2,2,0],[10,6,2,0,"_store"],[10,12,2,0],[10,15,2,0,"require"],[10,22,2,0],[10,23,2,0,"_dependencyMap"],[10,37,2,0],[11,2,4,0],[12,2,5,0],[13,2,6,0],[14,2,7,0],[15,2,7,0],[15,11,8,22,"signInWithCredentials"],[15,32,8,43,"signInWithCredentials"],[15,33,8,43,"_x"],[15,35,8,43],[16,4,8,43],[16,11,8,43,"_signInWithCredentials"],[16,33,8,43],[16,34,8,43,"apply"],[16,39,8,43],[16,46,8,43,"arguments"],[16,55,8,43],[17,2,8,43],[18,2,8,43],[18,11,8,43,"_signInWithCredentials"],[18,34,8,43],[19,4,8,43,"_signInWithCredentials"],[19,26,8,43],[19,33,8,43,"_asyncToGenerator2"],[19,51,8,43],[19,52,8,43,"default"],[19,59,8,43],[19,61,8,7],[19,72,8,7,"_ref"],[19,76,8,7],[19,78,8,84],[20,6,8,84],[20,10,8,46,"email"],[20,15,8,51],[20,18,8,51,"_ref"],[20,22,8,51],[20,23,8,46,"email"],[20,28,8,51],[21,8,8,53,"password"],[21,16,8,61],[21,19,8,61,"_ref"],[21,23,8,61],[21,24,8,53,"password"],[21,32,8,61],[22,8,8,61,"_ref$callbackUrl"],[22,24,8,61],[22,27,8,61,"_ref"],[22,31,8,61],[22,32,8,63,"callbackUrl"],[22,43,8,74],[23,8,8,63,"callbackUrl"],[23,19,8,74],[23,22,8,74,"_ref$callbackUrl"],[23,38,8,74],[23,52,8,77],[23,55,8,80],[23,58,8,80,"_ref$callbackUrl"],[23,74,8,80],[24,6,9,2],[24,10,9,8,"body"],[24,14,9,12],[24,17,9,15],[24,21,9,19,"URLSearchParams"],[24,36,9,34],[24,37,9,35],[24,38,9,36],[25,6,10,2,"body"],[25,10,10,6],[25,11,10,7,"set"],[25,14,10,10],[25,15,10,11],[25,22,10,18],[25,24,10,20,"email"],[25,29,10,25],[25,30,10,26],[26,6,11,2,"body"],[26,10,11,6],[26,11,11,7,"set"],[26,14,11,10],[26,15,11,11],[26,25,11,21],[26,27,11,23,"password"],[26,35,11,31],[26,36,11,32],[27,6,12,2],[28,6,13,2],[28,10,13,6,"callbackUrl"],[28,21,13,17],[28,23,13,19,"body"],[28,27,13,23],[28,28,13,24,"set"],[28,31,13,27],[28,32,13,28],[28,45,13,41],[28,47,13,43,"callbackUrl"],[28,58,13,54],[28,59,13,55],[30,6,15,2],[31,6,16,2],[31,12,16,8],[31,16,16,8,"apiFetch"],[31,29,16,16],[31,31,16,17],[31,63,16,49],[31,65,16,51],[32,8,17,4,"method"],[32,14,17,10],[32,16,17,12],[32,22,17,18],[33,8,18,4,"headers"],[33,15,18,11],[33,17,18,13],[34,10,18,15],[34,24,18,29],[34,26,18,31],[35,8,18,67],[35,9,18,68],[36,8,19,4,"body"],[36,12,19,8],[36,14,19,10,"body"],[36,18,19,14],[36,19,19,15,"toString"],[36,27,19,23],[36,28,19,24],[37,6,20,2],[37,7,20,3],[37,8,20,4],[39,6,22,2],[40,6,23,2],[40,10,23,8,"session"],[40,17,23,15],[40,26,23,24],[40,30,23,24,"apiFetchJson"],[40,47,23,36],[40,49,23,37],[40,68,23,56],[40,70,23,58],[41,8,23,60,"method"],[41,14,23,66],[41,16,23,68],[42,6,23,74],[42,7,23,75],[42,8,23,76],[43,6,24,2],[43,10,24,6,"session"],[43,17,24,13],[43,22,24,18,"session"],[43,29,24,25],[43,30,24,26,"user"],[43,34,24,30],[43,38,24,34,"session"],[43,45,24,41],[43,47,24,43,"expires"],[43,54,24,50],[43,55,24,51],[43,57,24,53],[44,8,25,4],[45,8,26,4,"useAuthStore"],[45,27,26,16],[45,28,26,17,"getState"],[45,36,26,25],[45,37,26,26],[45,38,26,27],[45,39,26,28,"setAuth"],[45,46,26,35],[45,47,26,36,"session"],[45,54,26,43],[45,55,26,44],[46,8,27,4],[46,15,27,11],[47,10,27,13,"ok"],[47,12,27,15],[47,14,27,17],[47,18,27,21],[48,10,27,23,"session"],[49,8,27,31],[49,9,27,32],[50,6,28,2],[51,6,29,2],[51,13,29,9],[52,8,29,11,"ok"],[52,10,29,13],[52,12,29,15],[52,17,29,20],[53,8,29,22,"error"],[53,13,29,27],[53,15,29,29],[54,6,29,51],[54,7,29,52],[55,4,30,0],[55,5,30,1],[56,4,30,1],[56,11,30,1,"_signInWithCredentials"],[56,33,30,1],[56,34,30,1,"apply"],[56,39,30,1],[56,46,30,1,"arguments"],[56,55,30,1],[57,2,30,1],[58,2,30,1],[58,6,30,1,"_default"],[58,14,30,1],[58,17,30,1,"exports"],[58,24,30,1],[58,25,30,1,"default"],[58,32,30,1],[58,35,32,15,"signInWithCredentials"],[58,56,32,36],[59,0,32,36],[59,3]],"functionMap":{"names":["<global>","signInWithCredentials"],"mappings":"AAA;OCO;CDsB"}},"type":"js/module"}]}